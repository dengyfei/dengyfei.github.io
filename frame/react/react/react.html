<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>react | å°é‚“åŒå­¦</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/style.css">
    <meta name="description" content="ç‚¹èµã€è½¬å‘ã€æ”¶è—">
    <meta name="keywords" content="å°é‚“èŠå‰ç«¯,vuepress,è‡ªå»ºåšå®¢,å°é‚“åŒå­¦">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="author" content="å°é‚“åŒå­¦">
    
    <link rel="preload" href="/assets/css/0.styles.9cc53e28.css" as="style"><link rel="preload" href="/assets/js/app.b627ab70.js" as="script"><link rel="preload" href="/assets/js/4.b7ac1ab4.js" as="script"><link rel="preload" href="/assets/js/1.9d26e7c2.js" as="script"><link rel="preload" href="/assets/js/10.a2a3a23e.js" as="script"><link rel="preload" href="/assets/js/16.d6e6d53e.js" as="script"><link rel="prefetch" href="/assets/js/11.98134433.js"><link rel="prefetch" href="/assets/js/12.61792e8a.js"><link rel="prefetch" href="/assets/js/13.193f9307.js"><link rel="prefetch" href="/assets/js/14.4f55412f.js"><link rel="prefetch" href="/assets/js/15.312bab3c.js"><link rel="prefetch" href="/assets/js/17.f15a0a2d.js"><link rel="prefetch" href="/assets/js/18.77f54671.js"><link rel="prefetch" href="/assets/js/19.b653579d.js"><link rel="prefetch" href="/assets/js/20.e191a925.js"><link rel="prefetch" href="/assets/js/21.405c21a4.js"><link rel="prefetch" href="/assets/js/5.75731db2.js"><link rel="prefetch" href="/assets/js/6.6027367b.js"><link rel="prefetch" href="/assets/js/7.f626a356.js"><link rel="prefetch" href="/assets/js/8.9cf2c28d.js"><link rel="prefetch" href="/assets/js/9.f39c5c6b.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.7646b3f8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9cc53e28.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container" data-v-4698c43e><div data-v-4698c43e><div id="loader-wrapper" class="loading-wrapper" data-v-1c4f0192 data-v-4698c43e data-v-4698c43e><div class="loader-main" data-v-1c4f0192><div data-v-1c4f0192></div><div data-v-1c4f0192></div><div data-v-1c4f0192></div><div data-v-1c4f0192></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-6cbeab0a data-v-4698c43e data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>å°é‚“åŒå­¦</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>å°é‚“åŒå­¦</span>
          Â Â 
          <span data-v-6cbeab0a>2022 - </span>
          2023
        </a></span></div></div> <div class="hide" data-v-4698c43e><header class="navbar" data-v-4698c43e><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">å°é‚“åŒå­¦</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-eye"></i>
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      å‰ç«¯æ¡†æ¶
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>React</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frame/react/react/react.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="iconfont undefined"></i>
  ReactåŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/frame/react/redux/redux.html" class="nav-link"><i class="iconfont undefined"></i>
  Redux
</a></li><li class="dropdown-subitem"><a href="/frame/react/router/router.html" class="nav-link"><i class="iconfont undefined"></i>
  React router v5
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-faq"></i>
      å‰ç«¯åŸºç¡€
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basic/css/sass.html" class="nav-link"><i class="iconfont undefined"></i>
  css
</a></li><li class="dropdown-item"><!----> <a href="/basic/webpack/webpack.html" class="nav-link"><i class="iconfont undefined"></i>
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/basic/babel/babel.html" class="nav-link"><i class="iconfont undefined"></i>
  babel
</a></li><li class="dropdown-item"><!----> <a href="/basic/git/git.html" class="nav-link"><i class="iconfont undefined"></i>
  git
</a></li></ul></div></div><div class="nav-item"><a href="/frame/react/react/algorithm/algorithm.html" class="nav-link"><i class="iconfont undefined"></i>
  ç®—æ³•
</a></div><div class="nav-item"><a href="https://github.com/dengyfei" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-blog"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  æ—¶é—´è½´
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-4698c43e></div> <aside class="sidebar" data-v-4698c43e><div class="personal-info-wrapper" data-v-6c8ffc9c><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-6c8ffc9c> <h3 class="name" data-v-6c8ffc9c>
    å°é‚“åŒå­¦
  </h3> <div class="num" data-v-6c8ffc9c><div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>9</h3> <h6 data-v-6c8ffc9c>æ–‡ç« </h6></div> <div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>10</h3> <h6 data-v-6c8ffc9c>æ ‡ç­¾</h6></div></div> <hr data-v-6c8ffc9c></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-eye"></i>
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      å‰ç«¯æ¡†æ¶
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>React</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/frame/react/react/react.html" aria-current="page" class="nav-link router-link-exact-active router-link-active"><i class="iconfont undefined"></i>
  ReactåŸºç¡€
</a></li><li class="dropdown-subitem"><a href="/frame/react/redux/redux.html" class="nav-link"><i class="iconfont undefined"></i>
  Redux
</a></li><li class="dropdown-subitem"><a href="/frame/react/router/router.html" class="nav-link"><i class="iconfont undefined"></i>
  React router v5
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-faq"></i>
      å‰ç«¯åŸºç¡€
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/basic/css/sass.html" class="nav-link"><i class="iconfont undefined"></i>
  css
</a></li><li class="dropdown-item"><!----> <a href="/basic/webpack/webpack.html" class="nav-link"><i class="iconfont undefined"></i>
  webpack
</a></li><li class="dropdown-item"><!----> <a href="/basic/babel/babel.html" class="nav-link"><i class="iconfont undefined"></i>
  babel
</a></li><li class="dropdown-item"><!----> <a href="/basic/git/git.html" class="nav-link"><i class="iconfont undefined"></i>
  git
</a></li></ul></div></div><div class="nav-item"><a href="/frame/react/react/algorithm/algorithm.html" class="nav-link"><i class="iconfont undefined"></i>
  ç®—æ³•
</a></div><div class="nav-item"><a href="https://github.com/dengyfei" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-blog"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  æ—¶é—´è½´
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>react</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frame/react/react/react.html" aria-current="page" class="active sidebar-link">react</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frame/react/react/react.html#åˆè¯†-react" class="sidebar-link">åˆè¯† React</a></li><li class="sidebar-sub-header"><a href="/frame/react/react/react.html#å¯åŠ¨é¡¹ç›®" class="sidebar-link">å¯åŠ¨é¡¹ç›®</a></li><li class="sidebar-sub-header"><a href="/frame/react/react/react.html#ç»„ä»¶åŒ–å¼€å‘" class="sidebar-link">ç»„ä»¶åŒ–å¼€å‘</a></li><li class="sidebar-sub-header"><a href="/frame/react/react/react.html#çŠ¶æ€ç®¡ç†" class="sidebar-link">çŠ¶æ€ç®¡ç†</a></li><li class="sidebar-sub-header"><a href="/frame/react/react/react.html#ç”Ÿå‘½å‘¨æœŸ" class="sidebar-link">ç”Ÿå‘½å‘¨æœŸ</a></li><li class="sidebar-sub-header"><a href="/frame/react/react/react.html#ç»„ä»¶é€šä¿¡" class="sidebar-link">ç»„ä»¶é€šä¿¡</a></li><li class="sidebar-sub-header"><a href="/frame/react/react/react.html#æ ·å¼ä¹¦å†™" class="sidebar-link">æ ·å¼ä¹¦å†™</a></li><li class="sidebar-sub-header"><a href="/frame/react/react/react.html#æ·»åŠ -class" class="sidebar-link">æ·»åŠ  class</a></li><li class="sidebar-sub-header"><a href="/frame/react/react/react.html#è¡¥å……" class="sidebar-link">è¡¥å……</a></li></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-6cbeab0a data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>react</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>å°é‚“åŒå­¦</span>
          Â Â 
          <span data-v-6cbeab0a>2022 - </span>
          2023
        </a></span></div></div> <div data-v-4698c43e><main class="page"><!----> <div class="page-title" style="display:none;"><h1>react</h1> <hr> <div data-v-484a899e><i class="iconfont reco-account" data-v-484a899e><span data-v-484a899e>å°é‚“åŒå­¦</span></i> <i class="iconfont reco-date" data-v-484a899e><span data-v-484a899e>2022-10-21 12:44:15</span></i> <!----> <i class="iconfont reco-tag tags" data-v-484a899e><span class="tag-item" data-v-484a899e>
      react
    </span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><div class="custom-block tip"><p>â­ï¸å‰è¨€</p> <p>React ä½œä¸ºå’Œ Vueã€Angular å¹¶é©¾é½é©±çš„å‰ç«¯ä¸‰å¤§ä¸»æµæ¡†æ¶ä¹‹ä¸€ï¼Œå…¶åœ°ä½è‡ªç„¶ä¸è¨€è€Œå–»ã€‚React ä¸€ç›´ç«™åœ¨å‰ç«¯æŠ€æœ¯å‰æ²¿ï¼Œå¼•é¢†ç€å‰ç«¯å‘å±•ã€‚å¾ˆå¤šå¤§å‚éƒ½é€‰æ‹©ä½¿ç”¨ React ä½œä¸ºæ—¥å¸¸å¼€å‘çš„æ¡†æ¶ï¼Œå¾ˆå¤šç¨‹åºå‘˜ä¹Ÿéƒ½åçˆ± Reactï¼Œä¸»è¦åŸå› åœ¨äº React ä½¿ç”¨çš„æ˜¯ JSX(ä¸€ç§é…·ä¼¼ JavaScript çš„è¯­è¨€)ç¼–å†™ï¼Œå¯¼è‡´ React çš„çµæ´»æ€§æ˜¯å…¶ä»–ä¸¤å¤§æ¡†æ¶æ‰€æ— æ³•åŒ¹æ•Œçš„ã€‚è€Œä¸” Vue å’Œ Angular ä¸­å¾ˆå¤šçš„æ€æƒ³éƒ½æ˜¯å€Ÿé‰´ Reactã€‚æ‰€ä»¥ï¼Œæ¯ä¸ªè‡´åŠ›äºçŒ®èº«å‰ç«¯äº‹ä¸šçš„å°ä¼™ä¼´éƒ½æ˜¯æœ‰å¿…è¦äº†è§£ React çš„ã€‚</p></div> <h2 id="åˆè¯†-react"><a href="#åˆè¯†-react" class="header-anchor">#</a> åˆè¯† React</h2> <p>å¼€å‘ React å¿…é¡»ä¾èµ–ä¸‰ä¸ªåº“ï¼š</p> <ul><li>reactï¼šåŒ…å« react æ‰€å¿…é¡»çš„æ ¸å¿ƒä»£ç </li> <li>react-domï¼šreact æ¸²æŸ“åœ¨ä¸åŒå¹³å°æ‰€éœ€è¦çš„æ ¸å¿ƒä»£ç </li> <li>babelï¼šå°† jsx è½¬æ¢æˆ JavaScript ä»£ç çš„å·¥å…·</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- å¼•å…¥ä¾èµ– --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span>
    <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/react@18/umd/react.development.js<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">crossorigin</span>
  <span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span>
    <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/react-dom@18/umd/react-dom.development.js<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">crossorigin</span>
  <span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/babel-standalone@6/babel.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/babel<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">//react@18ä¹‹å‰</span>
    <span class="token comment">// ReactDOM.render(&lt;h2&gt;hello react&lt;/h2&gt;, document.querySelector('#root'))</span>

    <span class="token comment">//react@18ç‰ˆæœ¬</span>
    <span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//åˆ›å»ºä¸€ä¸ªæ ¹</span>
    <span class="token comment">//åœ¨æ ¹ç»„ä»¶ä¸­æ¸²æŸ“å†…å®¹</span>
    root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>hello react<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>hello world<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="å£°æ˜å¼ç¼–ç¨‹"><a href="#å£°æ˜å¼ç¼–ç¨‹" class="header-anchor">#</a> å£°æ˜å¼ç¼–ç¨‹</h3> <p>React ä½¿ç”¨çš„æ˜¯å£°æ˜å¼ç¼–ç¨‹ï¼Œè€Œè™šæ‹Ÿ DOM å¸®åŠ©æˆ‘ä»¬ä»å‘½ä»¤å¼ç¼–ç¨‹è½¬åˆ°å£°æ˜å¼ç¼–ç¨‹çš„æ¨¡å¼ã€‚</p> <p>Virtual DOM(è™šæ‹Ÿ DOM)æ˜¯ä¸€ç§ç¼–ç¨‹ç†å¿µï¼ŒUI æ˜¯ä»¥ä¸€ç§ç†æƒ³åŒ–æˆ–è€…è¯´è™šæ‹ŸåŒ–çš„æ–¹å¼ä¿å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œå¹¶ä¸”å®ƒæ˜¯ä¸€ä¸ªç›¸å¯¹ç®€å•çš„ JavaScript å¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>root.render</code>è®©è™šæ‹Ÿ DOM å’ŒçœŸå® DOM åŒæ­¥èµ·æ¥ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºåè°ƒã€‚</p> <p><strong>React æ¸²æŸ“çš„æ•´ä¸ªæµç¨‹ï¼š</strong>
é¦–å…ˆæˆ‘ä»¬ç¼–å†™çš„ jsx ä»£ç ä¼šè¢« babel è§£ææˆ React Element å¯¹è±¡ï¼Œè¿™å°±æ˜¯è™šæ‹Ÿ DOMï¼Œè™šæ‹Ÿ DOM å®è´¨å°±æ˜¯æ™®é€šçš„ JavaScript å¯¹è±¡ã€‚ç„¶å react ä¼šé€šè¿‡è°ƒç”¨<code>root.render</code>å‡½æ•°è®©è™šæ‹Ÿ DOM åŒæ­¥ä¸ºçœŸå® DOMã€‚</p> <h2 id="å¯åŠ¨é¡¹ç›®"><a href="#å¯åŠ¨é¡¹ç›®" class="header-anchor">#</a> å¯åŠ¨é¡¹ç›®</h2> <p>å®é™…é¡¹ç›®å¼€å‘ä¸­æˆ‘ä»¬éƒ½ä¼šä½¿ç”¨è„šæ‰‹æ¶æ„å»ºé¡¹ç›®ï¼Œæ¯”å¦‚ Vue çš„ Vue-CLIï¼Œ è€Œ React ä½¿ç”¨çš„è„šæ‰‹æ¶æ˜¯<code>create-react-app</code>ï¼Œå¹¶ä¸”é»˜è®¤ä½¿ç”¨<code>yarn</code>ä½œä¸ºåŒ…ç®¡ç†å·¥å…·(React18 æ”¹æˆäº† npm)ã€‚å› æ­¤ï¼Œå¼€å‘å‰æˆ‘ä»¬éœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åœ¨å…¨å±€å®‰è£…è¿™ä¸¤ä¸ªå·¥å…·ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>npm install <span class="token operator">-</span>g yarn
npm install <span class="token operator">-</span>g create<span class="token operator">-</span>react<span class="token operator">-</span>app
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ç„¶åå°±å¯ä»¥æ‰§è¡Œä¸‹é¢å‘½ä»¤åˆ›å»ºä¸€ä¸ª React å·¥ç¨‹äº†ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>create<span class="token operator">-</span>react<span class="token operator">-</span>app é¡¹ç›®å
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>åˆ›å»ºå¥½çš„é¡¹ç›®è·¯å¾„å¦‚ä¸‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">public</span>
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> favicon<span class="token punctuation">.</span>ico
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>html
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> logo192<span class="token punctuation">.</span>png
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> logo512<span class="token punctuation">.</span>png
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> manifest<span class="token punctuation">.</span>json
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> robots<span class="token punctuation">.</span>txt
<span class="token operator">|</span>
<span class="token operator">|</span>
<span class="token operator">|</span><span class="token operator">--</span> src
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> App<span class="token punctuation">.</span>css
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> App<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> App<span class="token punctuation">.</span>test<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>css
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> index<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> logo<span class="token punctuation">.</span>svg
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> reportWebVitals<span class="token punctuation">.</span>js
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> setupTests<span class="token punctuation">.</span>js
<span class="token operator">|</span>
<span class="token operator">|</span>
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token operator">-</span>lock<span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> <span class="token keyword">package</span><span class="token punctuation">.</span>json
<span class="token operator">|</span><span class="token operator">--</span> <span class="token constant">README</span><span class="token punctuation">.</span>md
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ul><li><code>public</code>: è¯¥ç›®å½•ä¸‹ä¸»è¦ç”¨äºå­˜æ”¾ä¸€äº›é™æ€èµ„æº</li> <li><code>src/App.js</code>: App ç»„ä»¶ç›¸å…³çš„ä»£ç </li> <li><code>src/index.css</code>: å…¨å±€æ ·å¼æ–‡ä»¶</li> <li><code>src/index.js</code>: æ•´ä¸ªåº”ç”¨ç¨‹åºçš„å…¥å£æ–‡ä»¶
é¦–å…ˆæˆ‘ä»¬å¯ä»¥è¿›å…¥åˆ°å…¨å±€å…¥å£æ–‡ä»¶<code>src/index.js</code>ä¸­ï¼Œé‡Œé¢çš„ä¸»ä½“ä»£ç å¤§è‡´æ˜¯ä¸‹é¢è¿™æ ·</li></ul> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span>

<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">App</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>src/index.js</code>ä¸­åªåšçš„äº‹æƒ…å¾ˆç®€å•ï¼š</p> <ul><li>åŸºäº<code>id = root</code>çš„ DOM å…ƒç´ åˆ›å»ºä¸€ä¸ªæ ¹ï¼Œ</li> <li>è°ƒç”¨ render æ–¹æ³•ï¼Œå°†è™šæ‹Ÿ DOM åè°ƒæˆçœŸå® DOM</li></ul> <p>æ¥ä¸‹æ¥æˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯åœ¨ APP ç»„ä»¶ä¸­å¼€å‘å®šåˆ¶åŠŸèƒ½ï¼Œè€Œåœ¨ React ä¸­ï¼Œç»„ä»¶å¯ä»¥ä½¿ç”¨ç±»å’Œå‡½æ•°çš„æ–¹å¼å¼€å‘ã€‚</p> <h2 id="ç»„ä»¶åŒ–å¼€å‘"><a href="#ç»„ä»¶åŒ–å¼€å‘" class="header-anchor">#</a> ç»„ä»¶åŒ–å¼€å‘</h2> <div class="custom-block tip"><p>react ä¸­æœ‰ä¸¤ç§æ–¹å¼å®šä¹‰ç»„ä»¶ï¼šç±»ç»„ä»¶å’Œå‡½æ•°å¼ç»„ä»¶</p></div> <h3 id="ç±»ç»„ä»¶"><a href="#ç±»ç»„ä»¶" class="header-anchor">#</a> ç±»ç»„ä»¶</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'tom'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token plain-text"> </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="custom-block tip"><p>ç±»ç»„ä»¶çš„ç‰¹ç‚¹</p> <p>1ã€ç±»ç»„ä»¶å¿…é¡»ç»§æ‰¿ React.Component</p> <p>2ã€constructor æ˜¯å¯é€‰çš„ï¼Œé€šå¸¸ç”¨äºåˆå§‹åŒ–ä¸€äº›æ•°æ®</p> <p>3ã€this.state ç”¨äºç»´æŠ¤ç»„ä»¶å†…çš„æ•°æ®</p> <p>4ã€render å‡½æ•°æ˜¯ç±»ç»„ä»¶ä¸­å”¯ä¸€å¿…é¡»å®ç°çš„æ–¹æ³•</p></div> <h3 id="å‡½æ•°å¼ç»„ä»¶"><a href="#å‡½æ•°å¼ç»„ä»¶" class="header-anchor">#</a> å‡½æ•°å¼ç»„ä»¶</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> hello react </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-block tip"><p>å‡½æ•°å¼ç»„ä»¶çš„ç‰¹ç‚¹</p> <p>1ã€æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°</p> <p>2ã€æ²¡æœ‰ this å¯¹è±¡</p> <p>3ã€æ²¡æœ‰å†…éƒ¨çŠ¶æ€(state)</p></div> <div class="custom-block warning"><p>ğŸ’¡ æ³¨æ„: å¯¹äºå®šä¹‰åœ¨ç±»ç»„ä»¶çš„ render å‡½æ•°ï¼Œä¸æ”¯æŒæ˜¾ç¤ºå¯¹è±¡ç±»å‹çš„æ•°æ®ï¼Œä»¥ä¸‹ä»£ç ï¼Œreact å†…éƒ¨ä¼šæŠ›å‡ºå¼‚å¸¸</p></div> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">person</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'tom'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">13</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>person<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><img src="/assets/img/react_error.462def45.png" alt="react_error"></p> <h3 id="ç±»ç»„ä»¶ä¸­çš„-this-é—®é¢˜"><a href="#ç±»ç»„ä»¶ä¸­çš„-this-é—®é¢˜" class="header-anchor">#</a> ç±»ç»„ä»¶ä¸­çš„ this é—®é¢˜</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello world'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">btnClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello react'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>btnClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>ä¸Šé¢çš„ä»£ç æƒ³è¦å®ç°çš„é€»è¾‘æ˜¯ï¼šç‚¹å‡»æŒ‰é’®ï¼Œæ”¹å˜ state ä¸­ message çš„å€¼ï¼Œä»è€Œæ”¹å˜ç•Œé¢ä¸Šçš„æ¸²æŸ“ã€‚ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œæ§åˆ¶å°ä¼šæŠ¥ä¸‹é¢çš„é”™è¯¯ï¼š</p> <p><img src="/assets/img/this_error.3819a91c.png" alt="this_error"></p> <p>è¿™ä¸ªé”™è¯¯å¾ˆæ˜æ˜¾æç¤ºæˆ‘ä»¬ btnClick ä¸­çš„ this æ˜¯<code>undefined</code>ï¼Œè¿™æ˜¯ä¸ºå•¥å‘¢ï¼Ÿå› ä¸º JavaScript ç±»å¯¹è±¡é»˜è®¤ä½¿ç”¨çš„æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œè€Œä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä½¿ç”¨é»˜è®¤æ–¹å¼è°ƒç”¨å‡½æ•°ä¸”æœªæ˜ç¡®æŒ‡å®š this çš„æƒ…å†µä¸‹ï¼Œè¯¥å‡½æ•°çš„ this å°±æ˜¯æŒ‡å‘<code>undefined</code>ã€‚</p> <p>æœ‰ä»¥ä¸‹æ–¹å¼å¯ä»¥è§£å†³ this é—®é¢˜ï¼š</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello world'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//æ–¹æ¡ˆä¸€</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>btnClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">btnClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">btnClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello react'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/*æ–¹æ¡ˆä¸€*/</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>btnClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

        </span><span class="token punctuation">{</span><span class="token comment">/*æ–¹æ¡ˆäºŒ*/</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">btnClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

        </span><span class="token punctuation">{</span><span class="token comment">/*æ–¹æ¡ˆä¸‰*/</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">btnClick</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="çŠ¶æ€ç®¡ç†"><a href="#çŠ¶æ€ç®¡ç†" class="header-anchor">#</a> çŠ¶æ€ç®¡ç†</h2> <p>åœ¨ç±»ç»„ä»¶çš„<code>constructorå‡½æ•°</code>ä¸­ï¼Œ<code>this.state</code>å¯¹è±¡è¢«ç”¨æ¥ç»´æŠ¤ç»„ä»¶å†…çš„çŠ¶æ€ã€‚åœ¨å¼€å‘ä¸­ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥ä¿®æ”¹<code>state</code>ï¼ŒReact å†…éƒ¨å¹¶ä¸èƒ½æ£€æµ‹åˆ°çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–ï¼Œä¹Ÿå°±ä¸ä¼šè°ƒç”¨ç»„ä»¶å†…éƒ¨çš„ render å‡½æ•°é‡æ–°æ¸²æŸ“ç•Œé¢ã€‚å› æ­¤ï¼ŒReact æ¨èæˆ‘ä»¬ä½¿ç”¨<code>setStateå‡½æ•°</code>ä¿®æ”¹çŠ¶æ€ã€‚<code>setStateå‡½æ•°</code>å¹¶ä¸éœ€è¦æˆ‘ä»¬å®šä¹‰ï¼Œå®ƒæ˜¯<code>React.Component</code>ä¸­çš„æ–¹æ³•ã€‚</p> <p>ä¸ºä»€ä¹ˆ React å½“ä¸­è¦ä½¿ç”¨ setState å‘¢ï¼Ÿå› ä¸º React å¹¶æ²¡æœ‰åƒ Vue é‚£æ ·å®ç°åŒå‘ç»‘å®šå’Œæ•°æ®åŠ«æŒï¼Œæ‰€ä»¥ React å¹¶ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ render å‡½æ•°å°†è™šæ‹Ÿ DOM åŒæ­¥æˆçœŸå® DOMã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦æˆ‘ä»¬è‡ªå·±æ¥è°ƒç”¨ setState å‡½æ•°é€šçŸ¥ React æ‰§è¡Œ render å‡½æ•°ã€‚</p> <div class="custom-block tip"><p>setState å†…éƒ¨å®Œæˆäº†ä¸¤ä»¶äº‹æƒ…ï¼š1ã€æ”¹å˜ state å¯¹è±¡ï¼Œ2ã€è‡ªåŠ¨æ‰§è¡Œ render å‡½æ•°</p></div> <div class="custom-block warning"><p><code>setStateå‡½æ•°</code>è¦æ±‚ä¼ å…¥ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¿…é¡»çš„ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™å¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚å¯¹è±¡çš„å±æ€§è¡¨æ˜è¦æ›´æ–°çš„æ•°æ®ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰å‚æ•°ï¼Œè¦æ±‚ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¯¥å‡½æ•°ä¸­å¯ä»¥è·å–æœ¬æ¬¡æ›´æ–°åçš„çŠ¶æ€ã€‚</p></div> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'tom'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'jake'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>æ­¤æ—¶ç•Œé¢ä¸Šä¾ç„¶å±•ç¤ºçš„æ˜¯ tomï¼Œè€Œä¸æ˜¯ jakeï¼Œå› ä¸º React å¹¶ä¸çŸ¥é“æ­¤æ—¶çš„çŠ¶æ€å·²ç„¶å‘ç”Ÿäº†æ”¹å˜ï¼Œæ‰€ä»¥å°±ä¸ä¼šæ‰§è¡Œ render å‡½æ•°å°†è™šæ‹Ÿ DOM åè°ƒä¸ºçœŸå® DOMã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'tom'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'jake'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>setState å‡½æ•°åœ¨æ”¹å˜çŠ¶æ€ä¹‹åä¼šè°ƒç”¨ç»„ä»¶å†…éƒ¨çš„ render å‡½æ•°ï¼Œå› æ­¤æ­¤æ—¶ç•Œé¢ä¸Šæ˜¾ç¤ºçš„æ˜¯ jakeã€‚</p> <h3 id="setstate-æ˜¯å¼‚æ­¥æ›´æ–°çš„"><a href="#setstate-æ˜¯å¼‚æ­¥æ›´æ–°çš„" class="header-anchor">#</a> setState æ˜¯å¼‚æ­¥æ›´æ–°çš„</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'tom'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜å§“å</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">changeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'jake'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token comment">// {name: tom, age:18}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>ä¸Šé¢çš„ä»£ç æ‰§è¡Œåï¼Œå³ä½¿ç•Œé¢ä¸Šå·²ç»æ˜¾ç¤º jake äº†ï¼Œä½†æ˜¯ setState åé¢çš„æ‰“å°å´ä¾æ—§æ˜¯å‰ä¸€æ¬¡çš„çŠ¶æ€ã€‚å¯è§ setState æ˜¯å¼‚æ­¥çš„ã€‚</p> <div class="custom-block danger"><p>setState è®¾ç½®ä¸ºå¼‚æ­¥çš„åŸå› </p> <p><strong>1. æå‡æ€§èƒ½ï¼š</strong> å¦‚æœ setState æ˜¯åŒæ­¥çš„ï¼Œé‚£ä¹ˆæ¯æ¬¡è°ƒç”¨ setState éƒ½ä¼šç«‹é©¬æ›´æ–°ï¼Œæ„å‘³ç€ render å‡½æ•°ä¼šè¢«é¢‘ç¹è°ƒç”¨ï¼Œç•Œé¢å°±ä¼šä¸æ–­çš„é‡æ–°æ¸²æŸ“ï¼Œè¿™æ ·çš„æ•ˆç‡æ˜¯å¾ˆä½çš„ã€‚</p> <p><strong>2.ç¡®ä¿ state å’Œ props ä¿æŒåŒæ­¥ï¼š</strong> react ä¸­çš„ render å‡½æ•°ä¼šæ¯” setState ç¨æ…¢ä¸€äº›ï¼Œå¦‚æœç«‹å³æ›´æ–°äº† stateï¼Œä½†è¿˜æ²¡æ‰§è¡Œ render å‡½æ•°ï¼Œå³åœ¨ setState å‡½æ•°åˆšåˆšæ‰§è¡Œå®Œçš„é‚£ä¸€åˆ»ï¼Œstate å’Œ props æ˜¯ä¸€è‡´çš„ã€‚</p></div> <p>ä½†å¦‚æœ setState æ˜¯å¼‚æ­¥çš„ï¼Œæˆ‘ä»¬ä»€ä¹ˆæ—¶å€™æ‰èƒ½è·å–åˆ°æ›´æ–°åçš„çŠ¶æ€å‘¢ï¼Ÿè¿™é‡Œæä¾›ä¸¤ç§æ–¹æ¡ˆã€‚</p> <p><strong>é€šè¿‡å›è°ƒå‡½æ•°ã€‚</strong> å‰é¢æåˆ°è¿‡ setState æ¥æ”¶çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°éœ€è¦ä¼ ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªå‡½æ•°å½“ä¸­æ˜¯å¯ä»¥è·å–åˆ°ç»„ä»¶æ›´æ–°åçš„çŠ¶æ€çš„ã€‚ä¸Šé¢çš„ä»£ç å¦‚æœè¿™æ ·å†™ï¼Œå°±å¯ä»¥è·å–åˆ°æœ€æ–°çš„å€¼</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token function">changeName</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'jake'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span>  <span class="token comment">// {name: jake, age: 18}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>é€šè¿‡ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚</strong> åœ¨ react ä¸­ï¼Œç»„ä»¶çš„çŠ¶æ€æ›´æ–°åï¼Œéƒ½ä¼šç«‹é©¬è°ƒç”¨<code>componentDidUpdate</code><a href="#1">ç”Ÿå‘½å‘¨æœŸå‡½æ•°</a>ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­ä¹Ÿå¯ä»¥è·å–åˆ°ç»„ä»¶æœ¬æ¬¡æ›´æ–°çš„çŠ¶æ€</p> <h3 id="setstate-æ•°æ®çš„åˆå¹¶"><a href="#setstate-æ•°æ®çš„åˆå¹¶" class="header-anchor">#</a> setState æ•°æ®çš„åˆå¹¶</h3> <p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ setState æ›´æ–°ç»„ä»¶çŠ¶æ€æ—¶ï¼Œä¼ ç»™äº† setState ä¸€ä¸ª<code>{name: jake}</code> çš„å‚æ•°ï¼Œå‚æ•°é‡Œé¢å¹¶æ²¡æœ‰åŒ…å« age å±æ€§ï¼Œä½†æ˜¯æ›´æ–°åçš„çŠ¶æ€é‡Œé¢ä¾æ—§åŒ…å«äº† age å±æ€§ã€‚æˆ‘ä»¬æŠŠ setState çš„è¿™ç§ç‰¹æ€§ç§°ä¸º <strong>setState çš„æ•°æ®åˆå¹¶ã€‚</strong> setState æ•°æ®åˆå¹¶çš„ç‰¹æ€§å…è®¸æˆ‘ä»¬åœ¨è°ƒç”¨ setState å‡½æ•°çš„æ—¶å€™åªéœ€è¦ä¼ å…¥æœ¬æ¬¡éœ€è¦æ›´æ”¹çš„å±æ€§ï¼Œè€Œæ— éœ€ä¼ å…¥æ•´ä¸ªå¯¹è±¡ã€‚</p> <p>é‚£ä¹ˆä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§ç‰¹æ€§å‘¢ï¼Ÿè¿™è¿˜å¾—ä» react æºç åˆ†æã€‚react åœ¨æ‰§è¡Œ setState æ—¶ï¼Œæœ€åä¼šé€šè¿‡<code>Object.assign</code>æ¥åˆå¹¶æ•°æ®çš„ã€‚æ¯”å¦‚ä¸Šé¢çš„ä»£ç ï¼Œreact å†…éƒ¨æœ€åä¼šæ‰§è¡Œ</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'jake'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è¿™æ ·ï¼Œè¿”å›çš„å¯¹è±¡ä¸­å°±æ—¢åŒ…å«äº†<code>this.state</code>ä¸­çš„æ‰€æœ‰å±æ€§ï¼Œä¹ŸåŒ…å«äº†æœ¬æ¬¡æ›´æ–°çš„å±æ€§ã€‚</p> <h3 id="setstate-çš„åˆå¹¶"><a href="#setstate-çš„åˆå¹¶" class="header-anchor">#</a> setState çš„åˆå¹¶</h3> <p>setState é™¤äº†æœ‰æ•°æ®åˆå¹¶çš„ç‰¹æ€§ï¼Œå…¶æœ¬èº«ä¹Ÿæ˜¯å…·æœ‰åˆå¹¶ç‰¹æ€§çš„ã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å½“å‰è®¡æ•°ï¼š </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å¢åŠ </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>ä¸Šé¢ä»£ç æ‰§è¡Œåï¼Œç•Œé¢çš„æ•°å­—æ˜¯ 2ï¼Œè€Œä¸æ˜¯é¢„æœŸçš„ 3ã€‚è¿™æ˜¯ç”±äºå½“å¤šä¸ªè¿ç»­<code>setStateå‡½æ•°</code>ä¼ å…¥çš„å‚æ•°å‡ä¸ºå¯¹è±¡æ—¶ï¼Œreact å†…éƒ¨ä¼šæŠŠè¿™äº›å‚æ•°ç»Ÿä¸€æ”¾åˆ°ä¸€ä¸ªé“¾è¡¨ä¸­ï¼Œç„¶åå¾ªç¯è¿™ä¸ªé“¾è¡¨ï¼Œæ‰§è¡Œä¸‹é¢æ“ä½œæ¥åˆå¹¶å¤šä¸ª setState å‚æ•°ã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">/**
 * preState: å‰ä¸€ä¸ªsetStateå‡½æ•°
 * nextProps: åä¸€ä¸ªsetStateå‡½æ•°
 */</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> preState<span class="token punctuation">,</span> nextProps<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>å¦‚æ­¤ä¸€æ¥ï¼Œå½“å¤šä¸ª setState è¿ç»­ï¼Œä¸”ä¼ å…¥çš„å¯¹è±¡çš„å±æ€§æ˜¯ä¸€æ ·çš„æ—¶å€™ï¼Œåªä¼šæ‰§è¡Œæœ€åä¸€ä¸ª setState ä¸­çš„æ”¹å˜ã€‚</p> <p>é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§åŠæ³•ä¸è®©è¿ç»­çš„å¤šä¸ª setState å‡½æ•°åˆå¹¶å‘¢ï¼Ÿå½“ç„¶æ˜¯æœ‰çš„ã€‚ä¹‹å‰æåˆ°è¿‡ï¼ŒsetState å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ stateï¼Œè¡¨ç¤ºä¸Šä¸€æ¬¡çš„çŠ¶æ€ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯ propsã€‚</p> <div class="custom-block tip"><p>å½“ setState ä¼ å…¥çš„æ˜¯ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œreact å†…éƒ¨å°±ä¼šä¾æ¬¡æ‰§è¡Œæ¯ä¸€ä¸ª setState å‡½æ•°äº†</p></div> <p>æ‰€ä»¥ä¸Šé¢çš„ä»£ç å¯ä»¥è¿™æ ·æ”¹å†™ï¼Œä½¿ç•Œé¢æ•°å­—å˜ä¸º 3ã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token function">increment</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="setstate-çš„æ•°æ®ä¸å¯å˜æ€§"><a href="#setstate-çš„æ•°æ®ä¸å¯å˜æ€§" class="header-anchor">#</a> setState çš„æ•°æ®ä¸å¯å˜æ€§</h3> <p>react å»ºè®®é™¤äº†æ„é€ å‡½æ•°(constructor)å¤–ï¼Œä¸åº”åœ¨ä»»ä½•åœ°æ–¹ä¿®æ”¹<code>this.state</code>çš„å€¼ï¼Œå³ä¿è¯<code>this.state</code>ä¸­æ•°æ®çš„ä¸å¯å˜æ€§ã€‚å½“ä½¿ç”¨<code>setStateå‡½æ•°</code>æ›´æ–°çŠ¶æ€æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸éƒ½æ˜¯<strong>é‡æ–°å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œè€Œä¸åº”ä¸»åŠ¨ä¿®æ”¹ this.state ä¸­çš„å€¼</strong>ã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">friends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'lilie'</span><span class="token punctuation">,</span> <span class="token string">'hanmeimei'</span><span class="token punctuation">,</span> <span class="token string">'lucy'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ·»åŠ æœ‹å‹</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'tom'</span><span class="token punctuation">)</span> <span class="token comment">//é”™è¯¯çš„æ“ä½œï¼Œæ”¹å˜äº†this.stateä¸­çš„æ•°æ®</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">friends</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>friends<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>åŸºäº setState çš„æ•°æ®ä¸å¯å˜æ€§ï¼Œincrement å‡½æ•°ä½“ä¸­åº”è¯¥é‡æ–°å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œè€Œä¸èƒ½ç›´æ¥æ›´æ”¹ this.state çš„å€¼</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newFriends <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">,</span> <span class="token string">'tom'</span><span class="token punctuation">]</span> <span class="token comment">//æ­£ç¡®çš„æ“ä½œï¼Œç»´æŒäº†this.stateçš„ä¸å¯å˜æ€§</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">friends</span><span class="token operator">:</span> newFriends<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="header-anchor">#</a> ç”Ÿå‘½å‘¨æœŸ</h2> <h4 id="1">é¦–å…ˆæ¥çœ‹ä¸‹ React å®˜æ–¹ç»™å‡ºçš„ç”Ÿå‘½å‘¨æœŸå›¾è°±</h4> <p><img src="/assets/img/life_cycle.3fadb6ff.png" alt="life_cycle"></p> <p>å›¾è°±æŒ‡å‡ºï¼Œä¸€ä¸ªç»„ä»¶å¤§ä½“ä¼šç»å†ä¸‰ä¸ªé˜¶æ®µï¼š</p> <div class="custom-block tip"><ul><li>æŒ‚è½½é˜¶æ®µ(Mounting)ï¼šé¦–å…ˆ react ä¼šè°ƒç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–çŠ¶æ€ï¼Œç„¶åä¾æ¬¡ç»å† getDerivedStateFromPropsã€render å‡½æ•°å¹¶æ›´æ–° DOM èŠ‚ç‚¹å’Œ refsï¼Œæœ€åè°ƒç”¨ componentDidMount é’©å­</li></ul> <ul><li><p>æ›´æ–°é˜¶æ®µ(Updating)ï¼šå½“æ”¹å˜ä¼ å…¥ç»„ä»¶çš„ props æˆ–è€…è°ƒç”¨ setState å‡½æ•°æ—¶ï¼Œå…ˆæ˜¯é€šè¿‡ getDerivedStateFromPropsï¼Œè·å–æ›´æ–°å‰åçš„ props å’Œ stateï¼Œåœ¨ shouldComponentUpdate é’©å­ä¸­åˆ¤æ–­æ›´æ–°å‰åçš„ props å’Œ state æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œå¦‚æœå‘ç”Ÿäº†å˜åŒ–ï¼Œåˆ™æ›´æ–°ç•Œé¢ï¼Œå¹¶æ‰§è¡Œ componentDidUpdate é’©å­ï¼Œå¦åˆ™ï¼Œä¸åˆ·æ–°ç•Œé¢ã€‚</p></li> <li><p>å¸è½½é˜¶æ®µ(Unmounting)ï¼šç›´æ¥æ‰§è¡Œ componentWillUnmount é’©å­ï¼Œç„¶åå¸è½½ç»„ä»¶ã€‚</p></li></ul></div> <p>ç”Ÿå‘½å‘¨æœŸä¸­çš„å‡½æ•°ç§°ä¸ºç”Ÿå‘½å‘¨æœŸå‡½æ•°æˆ–ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œåœ¨ React çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œæœ‰å‡ ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯å€¼å¾—æ³¨æ„çš„ã€‚
<strong>1.constructorï¼š</strong> åˆå§‹åŒ–çŠ¶æ€ã€‚</p> <p><strong>2.componentDidMountï¼š</strong> ç»„ä»¶æŒ‚è½½åç«‹å³è°ƒç”¨ã€‚é€šå¸¸åœ¨è¯¥å‡½æ•°ä¸­æ‰§è¡ŒæŸäº›ä¾èµ– DOM çš„æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œè¯·æ±‚æˆ–è€…æ·»åŠ ä¸€äº›è®¢é˜…ã€‚</p> <p><strong>3.componentDidUpdate:</strong> åœ¨ç»„ä»¶çš„ props æˆ–è€… state æ›´æ–°åç«‹å³è°ƒç”¨ã€‚</p> <p><strong>4.componentWillUnmount:</strong> åœ¨ç»„ä»¶å¸è½½åŠé”€æ¯ä¹‹å‰è°ƒç”¨ã€‚ä¸€èˆ¬ç”¨äºæ‰§è¡Œä¸€äº›æ¸…ç†æ“ä½œï¼Œæ¯”å¦‚æ¸…é™¤è®¢é˜…ã€‚</p> <p><strong>5.shouldComponentUpdate:</strong> è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„ä½œç”¨æ˜¯æé«˜æ€§èƒ½ï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“ã€‚</p> <p>shouldComponentUpdate å…¶å®æ˜¯é€šè¿‡æ§åˆ¶æ˜¯å¦è°ƒç”¨ render å‡½æ•°ä»è€Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“æ¥æé«˜æ€§èƒ½çš„ã€‚å½“ä¸€ä¸ªç»„ä»¶ UI ç•Œé¢æ‰€ä¾èµ–çš„çŠ¶æ€(åŒ…æ‹¬ state å’Œ props)æ²¡æœ‰å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæˆ‘ä»¬æ²¡æœ‰å¿…è¦é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦é€šè¿‡ shouldComponentUpdate å‡½æ•°æ§åˆ¶ç»„ä»¶ä¸å»è°ƒç”¨ç»„ä»¶çš„ render å‡½æ•°ã€‚</p> <p>shouldComponentUpdate å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p> <p>å‚æ•°ä¸€ï¼šnextPropsï¼Œè¡¨ç¤ºä¿®æ”¹ä¹‹åæœ€æ–°çš„ props å±æ€§</p> <p>å‚æ•°äºŒï¼šnextStateï¼Œè¡¨ç¤ºä¿®æ”¹ä¹‹åæœ€æ–°çš„ state å±æ€§</p> <div class="custom-block tip"><p>shouldComponentUpdate å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª Boolean å€¼ã€‚å¦‚æœè¿”å›çš„æ˜¯ trueï¼Œè¡¨æ˜éœ€è¦è°ƒç”¨ render å‡½æ•°ï¼›å¦‚æœè¿”å›çš„æ˜¯ falseï¼Œè¡¨æ˜ä¸éœ€è¦è°ƒç”¨ render æ–¹æ³•ã€‚é»˜è®¤è¿”å› true</p></div> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello world'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'tom'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'renderå‡½æ•°æ›´æ–°äº†'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeVal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">changeVal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello react'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>ä¸Šé¢è¿™æ®µä»£ç æ¯æ¬¡ç‚¹å‡»æŒ‰é’®ï¼Œrender å‡½æ•°éƒ½ä¼šæ‰§è¡Œä¸€éå¹¶æ‰“å°ã€‚ä½†æ˜¯æˆ‘ä»¬ç»†æƒ³ä¸€äº›ï¼Œrender å‡½æ•°æ‰€ä¾èµ–çš„ this.state.name ä»å§‹è‡³ç»ˆéƒ½æœªæ›¾æ”¹å˜è¿‡ï¼Œå› æ­¤ï¼Œè¿™ç§æƒ…å†µä¸‹çš„ render å‡½æ•°å…¶å®å°±æ²¡å¿…è¦é‡å¤æ‰§è¡Œäº†ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ shouldComponentUpdate å‡½æ•°æ¥æ§åˆ¶ render çš„æ‰§è¡Œã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello world'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'tom'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name <span class="token operator">!==</span> nextState<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'renderå‡½æ•°æ›´æ–°äº†'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeVal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">changeVal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello react'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>ä¼˜åŒ–ä¹‹åçš„ä»£ç åªæœ‰å½“ UI ç•Œé¢ä¾èµ–çš„<code>this.state.name</code>(æœ¬æ¬¡çŠ¶æ€ä¸­çš„å€¼)ä¸ç­‰äº<code>nextState.name</code>(æ›´æ–°åçŠ¶æ€ä¸­çš„å€¼)æ—¶ï¼ŒshouldComponentUpdate å‡½æ•°æ‰ä¼šè¿”å› trueï¼Œå³å…è®¸ render å‡½æ•°é‡æ–°æ‰§è¡Œã€‚å¦åˆ™ï¼Œrender å‡½æ•°æ˜¯ä¸ä¼šé‡æ–°æ‰§è¡Œçš„ã€‚</p> <h2 id="ç»„ä»¶é€šä¿¡"><a href="#ç»„ä»¶é€šä¿¡" class="header-anchor">#</a> ç»„ä»¶é€šä¿¡</h2> <p>åœ¨æˆ‘ä»¬å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè‚¯å®šä¼šé‡åˆ°è®¸å¤šçš„äº¤äº’ï¼Œæ¯”å¦‚ç‚¹å‡»æŸä¸ªæŒ‰é’®ï¼Œç•Œé¢å¼¹å‡ºå¼¹æ¡†ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç»„ä»¶é—´äº’ç›¸ä¼ é€’ä¿¡æ¯ã€‚React ä¸­ç»„ä»¶é€šä¿¡é€šå¸¸åˆ†ä¸ºä¸‰ç±»ï¼šçˆ¶å­ç»„ä»¶é€šä¿¡ã€ç¥–å­™ç»„ä»¶é€šä¿¡å’Œå…¨å±€äº‹ä»¶ä¼ é€’ã€‚</p> <h3 id="çˆ¶å­ç»„ä»¶é€šä¿¡"><a href="#çˆ¶å­ç»„ä»¶é€šä¿¡" class="header-anchor">#</a> çˆ¶å­ç»„ä»¶é€šä¿¡</h3> <div class="custom-block tip"><p>çˆ¶ç»„ä»¶é€šè¿‡<code>å±æ€§=å€¼</code>çš„å½¢å¼æ¥ä¼ é€’å‘å­ç»„ä»¶ä¼ é€’ä¿¡æ¯ï¼Œè€Œå­ç»„ä»¶åˆ™æ˜¯é€šè¿‡ props å‚æ•°è·å–çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®</p></div> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token punctuation">{</span>
  <span class="token comment">/*ç±»ç»„ä»¶*/</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">ChildCpn</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/*å­ç»„ä»¶é€šè¿‡propsæ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å‚æ•°*/</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å½“å‰è®¡æ•°ï¼š</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>curCount<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token punctuation">{</span>
  <span class="token comment">/*å‡½æ•°å¼ç»„ä»¶*/</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">ChildCpn2</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å½“å‰è®¡æ•°ï¼š</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>curCount<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/*çˆ¶ç»„ä»¶é€šè¿‡'å±æ€§=å€¼'çš„å½¢å¼ä¼ é€’å‚æ•°*/</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ChildCpn</span></span> <span class="token attr-name">curCount</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ChildCpn2</span></span> <span class="token attr-name">curCount</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><p>æˆ‘ä»¬æœ‰æ²¡æœ‰æƒ³è¿‡ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰åœ¨ç»„ä»¶å®ä¾‹(this)ä¸ŠæŒ‚è½½ propsï¼Œé‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨å­ç»„ä»¶ä¸­ç›´æ¥é€šè¿‡ this.props è®¿é—®çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å‚æ•°å‘¢ï¼Ÿ</p> <p>è¿™ä¸ªé—®é¢˜å¾—ç”¨ React æºç æ¥å›ç­”ï¼Œæˆ‘ä»¬å£°æ˜çš„ç±»ç»„ä»¶éƒ½ç»§æ‰¿è‡ª React ä¸­çš„ Componentï¼Œè€Œåœ¨ React ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å®ƒå¯¹ Component çš„å®šä¹‰ã€‚
<img src="/assets/img/component.98cf5b40.png" alt="component">
ä»æºç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒReact åœ¨å…¶å†…éƒ¨ä¸»åŠ¨å°†ä¼ å…¥çš„ props æŒ‚è½½åˆ°äº†ç»„ä»¶å®ä¾‹(this)ä¸Šï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½ç›´æ¥é€šè¿‡ this.props è®¿é—®çˆ¶ç»„ä»¶ä¼ é€’æ¥çš„æ•°æ®äº†ã€‚</p> <div class="custom-block tip"><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå®é™…ä¸Šæˆ‘ä»¬æ— éœ€åœ¨ç»„ä»¶çš„æ„å»ºå‡½æ•°ä¸­æ‰‹åŠ¨æ¥æ”¶ props ç„¶åå†ä¼ ç»™ super å‡½æ•°ä¹Ÿå¯ä»¥ç›´æ¥è®¿é—® this.propsï¼Œå› ä¸º React å®é™…ä¸Šä¼šä¸»åŠ¨å°† props ä¼ é€’ç»™ Componentã€‚</p></div> <p>åœ¨å­ç»„ä»¶ä¸­ä¹Ÿå¯ä»¥å¯¹çˆ¶ç»„ä»¶ä¼ é€’æ¥çš„å‚æ•°çš„ç±»å‹è¿›è¡Œæ ¡éªŒï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦å€Ÿç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è‡ªè¡Œäº†è§£ä¸€ä¸‹<a href="https://github.com/facebook/prop-types" target="_blank" rel="noopener noreferrer">prop-types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸‹ prop-types</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>yarn add prop<span class="token operator">-</span>types
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ç„¶ååœ¨å­ç»„ä»¶ä¸­å¼•å…¥å¹¶ä½¿ç”¨</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span>

<span class="token keyword">class</span> <span class="token class-name">ChildCpn</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å½“å‰è®¡æ•°ï¼š</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>curCount<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//å‚æ•°æ ¡éªŒ</span>
ChildCpn<span class="token punctuation">.</span>propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">curCount</span><span class="token operator">:</span> PropTypes<span class="token punctuation">.</span>number<span class="token punctuation">.</span>isRequired<span class="token punctuation">,</span> <span class="token comment">//çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„curCountå¿…é¡»æ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œä¸”ä¸ºå¿…ä¼ å‚æ•°</span>
<span class="token punctuation">}</span>
<span class="token comment">//è®¾ç½®é»˜è®¤å€¼</span>
ChildCpn<span class="token punctuation">.</span>defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">curCount</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><div class="custom-block danger"><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒReact è§„å®šï¼Œä»»ä½•ç»„ä»¶éƒ½å¿…é¡»å‘çº¯å‡½æ•°ä¸€æ ·ä¿æŠ¤å®ƒä»¬çš„ props ä¸è¢«æ›´æ”¹</p></div> <p>ç°åœ¨æˆ‘ä»¬çŸ¥é“çˆ¶ç»„ä»¶æ˜¯å¦‚ä½•ä¼ é€’å‚æ•°ç»™å­ç»„ä»¶ä»¥åŠå­ç»„ä»¶åˆæ˜¯å¦‚ä½•æ¥æ”¶å‚æ•°çš„äº†ï¼Œé‚£å¦‚æœç°åœ¨è¿™æ ·çš„ä¸€ä¸ªä¸šåŠ¡ï¼šç‚¹å‡»å­ç»„ä»¶çš„æŸä¸ªæŒ‰é’®ï¼Œæ–°å¢ä¸€ä¸ªå¯¹è±¡åˆ° personList ä¸­ã€‚è¿™åˆè¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ</p> <p>å‰é¢è®²åˆ°è¿‡ï¼Œä»»ä½•ç»„ä»¶éƒ½ä¸èƒ½ä¿®æ”¹å…¶ props å¯¹è±¡ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥ä¿®æ”¹ this.props.personListã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åº”è¯¥é‡‡ç”¨å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ¶ˆæ¯ï¼Œé€šçŸ¥çˆ¶ç»„ä»¶ä¿®æ”¹ nameListï¼Œå½“ React æ£€æµ‹åˆ° nameList ä¿®æ”¹æ—¶ï¼Œä¼šä¸»åŠ¨æ›´æ–°ä¼ å…¥åˆ°å­ç»„ä»¶çš„ props å¯¹è±¡ã€‚</p> <p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬å¦‚ä½•æ‰èƒ½åœ¨å­ç»„ä»¶ä¸­å‘ŠçŸ¥çˆ¶ç»„ä»¶æ›´æ–°å‘¢ã€‚å…¶å®åœ¨ React ä¸­ï¼Œ<strong>å­ç»„ä»¶å¯ä»¥é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶ä¼ é€’æ•°æ®ç»™çˆ¶ç»„ä»¶ã€‚</strong></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">class</span> <span class="token class-name">ChildCpn</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å½“å‰è®¡æ•°ï¼š</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>curCount<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">addNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+5</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">addNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">addNum</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ChildCpn</span></span>
          <span class="token attr-name">curCount</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span></span>
          <span class="token attr-name">addNum</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleAddNum</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">handleAddNum</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> val<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h3 id="ç¥–å­™ç»„ä»¶é€šä¿¡"><a href="#ç¥–å­™ç»„ä»¶é€šä¿¡" class="header-anchor">#</a> ç¥–å­™ç»„ä»¶é€šä¿¡</h3> <p>å‰é¢ä»‹ç»äº†çˆ¶å­ç»„ä»¶é—´çš„é€šä¿¡ï¼Œä½†æ˜¯ä»…é è¿™ä¸€ç§æ–¹å¼æ˜¾ç„¶æ˜¯ä¸å¤Ÿçš„ã€‚å‡è®¾æˆ‘ä»¬çš„ç»„ä»¶æ ‘å¦‚ä¸‹ã€‚
<img src="/assets/img/multi_components.834bb12d.png" alt="multi_component"></p> <p>ç°åœ¨ç»„ä»¶ A æƒ³å‘ç»„ä»¶ F ä¼ é€’æ•°æ®ã€‚ä½¿ç”¨çˆ¶å­ç»„ä»¶é—´çš„é€šä¿¡ï¼Œé‚£ä¹ˆç»„ä»¶ A éœ€è¦å…ˆæŠŠæ•°æ®ä¼ é€’ç»™ç»„ä»¶ Bï¼Œå†é€šè¿‡ç»„ä»¶ B ä¼ é€’ç»™ç»„ä»¶ Fã€‚è¿™å½“ä¸­å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼šä¸€ä¸ªæ˜¯ç»„ä»¶ B å¹¶ä¸éœ€è¦è¿™ä¸ªæ•°æ®å´åˆä¸å¾—ä¸å……å½“ä¸­é€”çš„æ¥åŠ›æ£’ã€å¦ä¸€ä¸ªå°±æ˜¯å½“ç»„ä»¶åµŒå¥—å±‚çº§éå¸¸æ·±çš„æ—¶å€™ï¼Œè¿™ç§ä¼ é€’æ–¹å¼æ˜¾ç„¶æ˜¯éå¸¸ä¸å‹å¥½çš„ã€‚æ¥ä¸‹ä»‹ç» React ä¸­çš„ç¬¬äºŒç§é€šä¿¡æ–¹å¼ï¼š <strong>ç¥–å­™ç»„ä»¶é€šä¿¡</strong>ã€‚</p> <p>å¯¹äºç¥–å­™ç»„ä»¶é—´çš„é€šä¿¡ï¼ŒReact æä¾›äº†ä¸€ä¸ªå…±äº«å¯¹è±¡ï¼š<strong>Context</strong></p> <p>Context ç›¸å…³ APIï¼š</p> <p>1ã€React.createContextï¼šåˆ›å»ºä¸€ä¸ªéœ€è¦å…±äº«çš„ Context å¯¹è±¡ã€‚å¦‚æœä¸€ä¸ªç»„ä»¶è®¢é˜…äº† Contextï¼Œé‚£ä¹ˆè¿™ä¸ªç»„ä»¶ä¼šä»ç¦»è‡ªèº«æœ€è¿‘çš„é‚£ä¸ªåŒ¹é…çš„ Provider ä¸­è¯»å–å½“å‰çš„ context å€¼ã€‚</p> <p>2ã€Context.Providerï¼šæ¯ä¸ª Context å¯¹è±¡é‡Œé¢éƒ½æœ‰ä¸€ä¸ª React ç»„ä»¶ï¼šProviderã€‚è¿™ä¸ªç»„ä»¶æ¥æ”¶ä¸€ä¸ª value å±æ€§ä½œä¸ºå…±äº«æ•°æ®ï¼Œä¼ é€’ç»™æ¶ˆè´¹ç»„ä»¶ï¼Œå½“ Provider ç»„ä»¶çš„ value å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå®ƒå†…éƒ¨çš„æ‰€æœ‰æ¶ˆè´¹ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚</p> <p>3ã€Class.contextTypeï¼šæ¯ä¸€ä¸ªç±»ç»„ä»¶éƒ½ä¼šè‡ªå¸¦ä¸€ä¸ª context å±æ€§ï¼Œé»˜è®¤ä¸ºç©ºå¯¹è±¡ã€‚å°†æŒ‚è½½åœ¨ class ä¸Šçš„ contextType å±æ€§é‡æ–°èµ‹å€¼ä¸ºä¸€ä¸ª Context å¯¹è±¡æ—¶ï¼Œç±»ç»„ä»¶ä¸Šçš„ context å±æ€§å°±å˜æˆäº† Context.Provider ä¼ è¿›æ¥çš„ value å€¼ã€‚ä½ å¯ä»¥åœ¨ä»»ä½•ç”Ÿå‘½å‘¨æœŸä¸­è®¿é—®å®ƒï¼ŒåŒ…æ‹¬ render å‡½æ•°ã€‚</p> <p>4ã€Context.Consumerï¼šä¹Ÿæ˜¯ä¸€ä¸ª React ç»„ä»¶ï¼Œå¯ä»¥è®¢é˜…åˆ° context çš„å˜æ›´ã€‚ç”±äºå‡½æ•°å¼ç»„ä»¶ä¸­ä¸å­˜åœ¨æ‰€è°“çš„ contextType å±æ€§å’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚è¿™ä¸ªç»„ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­å…±äº«æ•°æ®ã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> createContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> UserContext <span class="token operator">=</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//åˆ›å»ºä¸€ä¸ªContextå¯¹è±¡</span>
<span class="token comment">//å­å­™ç»„ä»¶</span>
<span class="token keyword">class</span> <span class="token class-name">Children</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å§“åï¼š </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> <span class="token comment">//é€šè¿‡this.contextè®¿é—®</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

Children<span class="token punctuation">.</span>contextType <span class="token operator">=</span> UserContext <span class="token comment">//å°†ç±»ç»„ä»¶çš„contextTypeèµ‹å€¼ç»™ä¸€ä¸ªContextå¯¹è±¡</span>

<span class="token comment">//çˆ¶ç»„ä»¶</span>
<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Children</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ç¥–å…ˆç»„ä»¶</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'tom'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Main</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">UserContext.Provider</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä½œä¸ºç¥–å…ˆç»„ä»¶çš„ app æ²¡æœ‰é€šè¿‡ Main ç»„ä»¶è€Œç›´æ¥å°†æ•°æ®ä¼ é€’ç»™äº†åä»£ç»„ä»¶ Children ä¸­ã€‚ç±»ç»„ä»¶ä¸­å¯ä»¥é€šè¿‡ this.context è®¿é—®ç¥–å…ˆç»„ä»¶ä¼ é€’è¿‡æ¥çš„å‚æ•°ï¼Œå¦‚æœæ˜¯å‡½æ•°å¼ç»„ä»¶å‘¢ï¼Ÿå‡½æ•°å¼ç»„ä»¶ä¸­å¯æ²¡æœ‰ this å®ä¾‹ï¼Œæ›´åˆ«è¯´ this.context å¯¹è±¡äº†ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä½¿ç”¨åˆ° Context.Consumer ç»„ä»¶äº†ã€‚æ‰€ä»¥ï¼Œä½œä¸ºå‡½æ•°å¼ç»„ä»¶ï¼Œåº”è¯¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç æ¨¡å¼æ¥è·å–æ•°æ®ã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Children</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UserContext.Consumer</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">å§“åï¼š </span><span class="token punctuation">{</span>value<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">UserContext.Consumer</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="å…¨å±€äº‹ä»¶ä¼ é€’"><a href="#å…¨å±€äº‹ä»¶ä¼ é€’" class="header-anchor">#</a> å…¨å±€äº‹ä»¶ä¼ é€’</h3> <p>ä¸Šé¢æˆ‘ä»¬å·²ç»ä»‹ç»äº†ä¸¤ç§ç»„ä»¶é—´çš„æ•°æ®é€šä¿¡ã€‚ä½†æ˜¯è¿™ä¸¤ç§é€šä¿¡æ–¹å¼éƒ½å»ºç«‹åœ¨ç»„ä»¶é—´å­˜åœ¨ç›´æ¥å…³ç³»ï¼Œå¦‚æœä¸Šå›¾ä¸­çš„ç»„ä»¶ G æƒ³å’Œç»„ä»¶ B æˆ–è€…ç»„ä»¶ E é€šä¿¡ï¼Œä»…ä»…ä¾é å‰é¢ä¸¤ç§æ–¹å¼ï¼Œå®ç°èµ·æ¥è¿˜æ˜¯ç•¥å¾®æœ‰ç‚¹éº»çƒ¦çš„ã€‚æ‰€ä»¥æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†ä»‹ç»ä¸€ç§æ›´ä¸ºé€šç”¨çš„é€šä¿¡æ–¹å¼ï¼š<strong>å…¨å±€äº‹ä»¶ä¼ é€’ã€‚</strong></p> <p>ä½¿ç”¨å…¨å±€äº‹ä»¶ä¼ é€’éœ€è¦ä¾èµ– Node çš„äº‹ä»¶å‘å°„å™¨ï¼š<a href="https://github.com/browserify/events" target="_blank" rel="noopener noreferrer">events<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚é‚£ä¹ˆé¦–å…ˆå¾—å®‰è£… events åŒ…</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>yarn add events
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> EventEmitter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'events'</span>

<span class="token keyword">const</span> eventBus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//åˆ›å»ºä¸€ä¸ªå‘å°„å™¨</span>

<span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emitEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">ä¼ é€’</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span>
  <span class="token function">emitEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    eventBus<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'showName'</span><span class="token punctuation">,</span> <span class="token string">'tom'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span> <span class="token comment">//è§¦å‘å…¨å±€äº‹ä»¶ï¼Œå¹¶ä¼ é€’å‚æ•°</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Children</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//ç›‘å¬å…¨å±€äº‹ä»¶</span>
    eventBus<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token string">'showName'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleShowName<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//å–æ¶ˆäº‹ä»¶ç›‘å¬</span>
    eventBus<span class="token punctuation">.</span><span class="token function">removeListener</span><span class="token punctuation">(</span><span class="token string">'showName'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleShowName<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Children</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span>
  <span class="token function">handleShowName</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Main</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Children</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><p>ä¸Šé¢ä¾‹å­ä¸­ï¼ŒMain ç»„ä»¶å’Œ Children ç»„ä»¶æ˜¯åŒçº§ç»„ä»¶ï¼Œå®ƒä»¬ä¹‹é—´é€šè¿‡å…¨å±€äº‹ä»¶é€šä¿¡ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­åªæ¶‰åŠåˆ°äº†ç›¸å…³çš„ä¸¤ä¸ªç»„ä»¶ï¼Œå¹¶ä¸”ä¸ç»„ä»¶å±‚çº§æ— å…³ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å‘ç°ï¼Œå…¨å±€äº‹ä»¶é€šä¿¡æ¯”å‰é¢ä¸¤ç§é€šä¿¡æ–¹å¼æ›´çµæ´»ï¼Œæ›´é€šç”¨ã€‚</p> <h2 id="æ ·å¼ä¹¦å†™"><a href="#æ ·å¼ä¹¦å†™" class="header-anchor">#</a> æ ·å¼ä¹¦å†™</h2> <p>ä½ å¯èƒ½å·²ç»å‘ç°æˆ‘ä»¬ä¹‹å‰å†™çš„ react ä»£ç éƒ½ç¼ºå°‘äº† css éƒ¨åˆ†ã€‚ç¡®å®ï¼Œåœ¨ react ä¸­ï¼Œcss æ ·å¼çš„ä¹¦å†™ä¸€ç›´å›°æ‰°ç€å‰ç«¯äººå‘˜ï¼Œç”±äº React å®˜æ–¹å¹¶æ²¡æœ‰ç»Ÿä¸€ css çš„ä¹¦å†™å½¢å¼ï¼Œå› æ­¤ï¼Œä¸åŒçš„å¼€å‘äººå‘˜æœ‰ç€ä¸åŒçš„ä¹¦å†™ä¹ æƒ¯ã€‚è€Œä¸”åœ¨ React ä¸­ï¼Œæ ·å¼çš„ä¹¦å†™çš„ç¡®æ²¡æœ‰ vue ä¸­é‚£ä¹ˆçš„çµæ´»ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°†ä»‹ç»å‡ ç§å¸¸è§çš„ css ä¹¦å†™å½¢å¼ï¼Œå®ƒä»¬å„æœ‰åƒç§‹ï¼Œå®é™…å¼€å‘ä¸­ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥æŒ‰ç…§è‡ªå·±çš„ä¹ æƒ¯è‡ªè¡Œé€‰æ‹©ã€‚</p> <h3 id="ä¸€ã€å†…è”æ ·å¼"><a href="#ä¸€ã€å†…è”æ ·å¼" class="header-anchor">#</a> ä¸€ã€å†…è”æ ·å¼</h3> <p>å†…è”æ ·å¼æ˜¯ React å®˜æ–¹æ¯”è¾ƒæ¨èçš„ä¸€ç§ css æ ·å¼å†™æ³•ï¼Œåœ¨ React ä¸­ï¼Œå¯ä»¥å¯¹å…ƒç´ çš„ style å±æ€§èµ‹å€¼ä»¥æ·»åŠ æ ·å¼ã€‚<strong>style æ¥æ”¶çš„æ˜¯ä¸€ä¸ªé‡‡ç”¨å°é©¼å³°å‘½åå±æ€§çš„ JavaScript å¯¹è±¡ï¼Œè€Œä¸æ˜¯ css å­—ç¬¦ä¸²ã€‚</strong> å¹¶ä¸”ï¼Œå†…è”æ ·å¼å¯ä»¥å¼•ç”¨ state çš„çŠ¶æ€æ¥åŠ¨æ€çš„è®¾ç½®ç›¸å…³æ ·å¼ã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> h2Style <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>color<span class="token punctuation">,</span> <span class="token comment">//å¼•ç”¨ç»„ä»¶çŠ¶æ€åŠ¨æ€çš„è®¾ç½®æ ·å¼</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>h2Style<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello react</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/*styleæ¥æ”¶ä¸€ä¸ªå¯¹è±¡*/</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#000'</span><span class="token punctuation">,</span> <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">'30px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello world</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨å†…è”æ ·å¼æ—¶ï¼Œç»„ä»¶é—´çš„æ ·å¼ä¸ä¼šæœ‰å†²çªï¼Œè€Œä¸”è¿˜èƒ½åŠ¨æ€è®¾ç½®æ ·å¼ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ React å®˜æ–¹æ¯”è¾ƒæ¨èä½¿ç”¨å†…è”æ ·å¼çš„åŸå› ã€‚</p> <p>ä½†æ˜¯ï¼Œå†…è”æ ·å¼ä¹Ÿæœ‰å…¶è‡´å‘½çš„ç¼ºç‚¹ã€‚é¦–å…ˆï¼Œå†…è”æ ·å¼éœ€è¦ä¸ºæ¯ä¸ªç»„ä»¶ä¹¦å†™ä¸€éæ ·å¼ï¼Œè¿™å°±è¦æ±‚ä¹¦å†™å¤§é‡çš„æ ·å¼ä»£ç ï¼Œé€ æˆä»£ç æ··ä¹±ã€‚å…¶æ¬¡å°±æ˜¯æŸäº›æ ·å¼æ˜¯æ— æ³•é€šè¿‡å†…è”æ ·å¼ç¼–å†™çš„ï¼Œæ¯”å¦‚ä¼ªç±»/ä¼ªå…ƒç´ ã€‚</p> <h3 id="äºŒã€å¼•å…¥-css-æ–‡ä»¶"><a href="#äºŒã€å¼•å…¥-css-æ–‡ä»¶" class="header-anchor">#</a> äºŒã€å¼•å…¥ css æ–‡ä»¶</h3> <p>è¿™é‡Œé¦–å…ˆè¦ä»‹ç»ä¸€ä¸‹å¦‚ä½•ç»™ React å…ƒç´ æ·»åŠ ç±»åã€‚æˆ‘ä»¬çŸ¥é“ä¸ç®¡æ˜¯åœ¨åŸç”Ÿçš„ html å…ƒç´ è¿˜æ˜¯ vue å½“ä¸­ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ç›´æ¥ç»™æŸä¸€å…ƒç´ æ·»åŠ <code>classå±æ€§</code>æ¥ç»™å…ƒç´ æ·»åŠ ç±»åã€‚</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>test<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä½†ç”±äº React ç»„ä»¶éƒ½æ˜¯é€šè¿‡ JSX è¯­æ³•åˆ›å»ºçš„ï¼ŒJSX æ˜¯ä¸€ç§ JavaScript çš„è¯­æ³•æ‰©å±•ï¼Œå®ƒåŒ…å«äº† JavaScript ä¸­çš„æ‰€æœ‰ç‰¹æ€§ã€‚è€Œ JavaScript ä¸­å·²ç»å­˜åœ¨äº†ä¸€ä¸ªåˆ›å»ºç±»ç»„ä»¶çš„å…³é”®å­—: &quot;class&quot;ï¼Œæ‰€ä»¥åœ¨ React ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éƒ½æ˜¯é€šè¿‡ç»™ React å…ƒç´ æ·»åŠ ä¸€ä¸ª<code>classNameå±æ€§</code>æ¥å®šä¹‰ç±»åã€‚</p> <p>å‰é¢è®²åˆ°ï¼ŒJSX æ‹¥æœ‰ JavaScript çš„æ‰€æœ‰ç‰¹æ€§ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ JSX ä¸­åƒ JavaScript ä¸€æ ·å¼•å…¥ css æ–‡ä»¶ã€‚</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* app.cssæ–‡ä»¶ */</span>
<span class="token selector">.title</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// app.jsæ–‡ä»¶</span>

<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token comment">//å¼•å…¥å¤–éƒ¨cssæ–‡ä»¶</span>
<span class="token keyword">import</span> <span class="token string">'./app.css'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello react</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>è¿™ç§å¼•å…¥å¤–éƒ¨ css æ–‡ä»¶çš„æ–¹å¼å¾ˆç¬¦åˆæˆ‘ä»¬æ—¥å¸¸ç¼–ç ä¹ æƒ¯ï¼Œä½†æ˜¯å…¶æœ€å¤§çš„ä¸è¶³åœ¨äºæ ·å¼çš„æƒé‡éš¾ä»¥æ§åˆ¶ï¼Œæ ·å¼ä¹‹é—´å®¹æ˜“è¢«è¦†ç›–ï¼Œè°ƒè¯•èµ·æ¥ä¹Ÿæ˜¯æä¸ºä¸æ–¹ä¾¿çš„ã€‚</p> <h3 id="ä¸‰ã€css-modules"><a href="#ä¸‰ã€css-modules" class="header-anchor">#</a> ä¸‰ã€CSS modules</h3> <p>css modules å¹¶ä¸æ˜¯ React ç‰¹æœ‰çš„è§£å†³æ–¹æ¡ˆï¼Œæ‰€æœ‰ä½¿ç”¨äº†ç±»ä¼¼äº webpack é…ç½®ç¯å¢ƒä¸‹éƒ½å¯ä»¥ä½¿ç”¨ css modulesã€‚ä½†æ˜¯ï¼Œå¦‚æœåœ¨å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œé‚£æˆ‘ä»¬éœ€è¦è‡ªå·±é…ç½®ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥åœ¨ <code>webpack.config.js</code>ä¸­é…ç½®<code>module: true</code>ï¼Œä½¿é¡¹ç›®æ”¯æŒ css modulesã€‚</p> <p>ä¸è¿‡ React è„šæ‰‹æ¶å·²ç»å†…ç½®äº† css modules çš„é…ç½®ï¼Œæˆ‘ä»¬åªéœ€è¦å°†æ™®é€šçš„<code>.css/.less/.sass</code>ç­‰æ–‡ä»¶çš„æ–‡ä»¶åéƒ½ä¿®æ”¹æˆ<code>.module.css</code>ã€<code>.module.less</code>ã€<code>.module.scss</code>ç­‰ï¼Œä¹‹åå°±å¯ä»¥å¼•å…¥å¹¶ä½¿ç”¨äº†ã€‚</p> <p>æˆ‘ä»¬å¯ä»¥åœ¨ app.module.css æ–‡ä»¶ä¸­</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* app.module.cssæ–‡ä»¶ */</span>
<span class="token selector">.title</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ç„¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ app.js ä¸­å¼•ç”¨ css module æ–‡ä»¶äº†ï¼Œcss module ä¼šæš´éœ²ä¸€ä¸ªå¯¹è±¡ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">import</span> AppStyle <span class="token keyword">from</span> <span class="token string">'./app.module.css'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2 className<span class="token operator">=</span><span class="token punctuation">{</span>AppStyle<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&gt;</span>hello react<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>css module å¯ä»¥è§£å†³å±€éƒ¨ä½œç”¨åŸŸçš„é—®é¢˜ï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€æ ·å¼ã€‚ä½†æ˜¯ css module å¼•ç”¨ç±»åæ—¶ä¸èƒ½ä½¿ç”¨è¿å­—ç¬¦(.home-title æ˜¯ä¸è¢«è¯†åˆ«çš„)ï¼Œå› ä¸º JavaScript ä¸­ä¸è¯†åˆ«è¿å­—ç¬¦ã€‚å¦å¤–å¯¹äºä¸€äº›éœ€è¦åŠ¨æ€æ”¹å˜çš„æ ·å¼ï¼Œcss module ä¹Ÿæ— æ³•å®Œæˆï¼Œè¿™ç§æƒ…å†µä¸‹ä¾ç„¶æ˜¯éœ€è¦é å†…è”æ¨¡å¼æ¥å®Œæˆçš„ã€‚</p> <h3 id="å››ã€css-in-js"><a href="#å››ã€css-in-js" class="header-anchor">#</a> å››ã€css in js</h3> <p>css in js æŒ‡çš„æ˜¯ä¸€ç§æ¨¡å¼ï¼Œå…¶ä¸­ css ç”± JavaScript ç”Ÿæˆã€‚è¿™éƒ¨åˆ†åŠŸèƒ½æ˜¯ç”±ç¬¬ä¸‰æ–¹åº“å®ç°çš„ï¼Œç›®å‰æœ€ä¸ºæµè¡Œçš„ä¸»è¦æœ‰ï¼š<a href="https://github.com/styled-components/styled-components" target="_blank" rel="noopener noreferrer">styled-components<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> å’Œ <a href="https://github.com/emotion-js/emotion" target="_blank" rel="noopener noreferrer">emotion<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚è¿™é‡Œä¸»è¦ä»‹ç» style-componentsã€‚</p> <p><strong>styled-components çš„æœ¬è´¨æ˜¯é€šè¿‡å‡½æ•°çš„è°ƒç”¨ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œæœ€ç»ˆåˆ›å»ºå‡ºä¸€ä¸ª React ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶ä¼šè¢«è‡ªåŠ¨æ·»åŠ ä¸Šä¸€ä¸ªå”¯ä¸€çš„ class å’Œç›¸å…³çš„æ ·å¼</strong></p> <p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®‰è£… styled-components</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>yarn add styled<span class="token operator">-</span>components
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ç„¶åå°±å¯ä»¥å‘ä¸‹é¢é‚£æ ·ä½¿ç”¨äº†</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">'styled-components'</span>
<span class="token comment">// ä½¿ç”¨styledè°ƒç”¨å‡½æ•°ç”Ÿæˆä¸€ä¸ªReactç»„ä»¶ï¼Œå¹¶æ·»åŠ æ ·å¼ï¼Œç”±äºæ˜¯Reactç»„ä»¶ï¼Œæ‰€ä»¥è¿”å›å€¼çš„é¦–å­—æ¯å¿…é¡»å¤§å†™</span>
<span class="token keyword">const</span> MyDiv <span class="token operator">=</span> styled<span class="token punctuation">.</span><span class="token function">div</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
  <span class="token string-property property">'.title'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">'50px'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>MyDiv<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2 className<span class="token operator">=</span><span class="token string">&quot;title&quot;</span><span class="token operator">&gt;</span>hello react<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>MyDiv<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><code>styled.æ ‡ç­¾å</code>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª react ç»„ä»¶ï¼Œè€Œè¿™ä¸ªç»„ä»¶æœ€åä¼šè¢«æ¸²æŸ“æˆ styled åé¢æ¥çš„é‚£ä¸ªæ ‡ç­¾ã€‚</p> <p>æœ€ç»ˆä¸Šé¢çš„ä»£ç ä¼šè¢«æ¸²æŸ“æˆä¸‹é¢çš„ç»“æ„ï¼š</p> <p><img src="data:image/png;base64,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" alt="styled_components"></p> <p>å¯ä»¥çœ‹è§ï¼Œè°ƒç”¨<code>styled.æ ‡ç­¾å</code>è¿™ä¸ªå‡½æ•°ç”Ÿæˆçš„æ ‡ç­¾ä¼šè¢«è‡ªåŠ¨ç»‘å®šä¸€ä¸ªå”¯ä¸€çš„ç±»ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…æ±¡æŸ“å’Œè¦†ç›–äº†ã€‚</p> <p>åœ¨ JavaScript ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥è°ƒç”¨å‡½æ•°ã€‚å› æ­¤ä¸Šé¢<code>styled.æ ‡ç­¾å</code>å‡½æ•°çš„è°ƒç”¨ä¹Ÿå¯ä»¥ç”¨æ¨¡æ¿å­—ç¬¦ä¸²æ¥å®ç°ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> MyDiv <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  color: red;
  .title {
    font-size: 50px;
  }
</span><span class="token template-punctuation string">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>è€Œä¸”å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²è°ƒç”¨<code>styled.æ ‡ç­¾å</code>å‡½æ•°çš„ä¼ å‚æ›´ç¬¦åˆ css çš„å†™æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬æ›´å¤šçš„æƒ…å†µä¼šä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚</p> <p>è€Œä¸”ï¼Œå½“ä½¿ç”¨æ¨¡å—å­—ç¬¦ä¸²è°ƒç”¨<code>styled.æ ‡ç­¾å</code>å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å€ŸåŠ©ä¸€äº›ç‰¹æ€§å¸®åŠ©æˆ‘ä»¬æ›´æ–¹ä¾¿çš„ä¹¦å†™æ ·å¼ã€‚</p> <h4 id="_1ã€props-å±æ€§"><a href="#_1ã€props-å±æ€§" class="header-anchor">#</a> 1ã€props å±æ€§</h4> <p>é€šè¿‡ç»™ styled ç”Ÿæˆçš„ react ç»„ä»¶ä¼ å€¼ï¼Œç„¶åä½¿ç”¨ props å–å€¼ï¼Œèƒ½æœ‰æ•ˆçš„å¸®åŠ©æˆ‘ä»¬è§£å†³åŠ¨æ€æ ·å¼é—®é¢˜ã€‚</p> <div class="custom-block tip"><p>è·å– props éœ€è¦é€šè¿‡${}ä¼ å…¥ä¸€ä¸ªæ’å€¼å‡½æ•°ï¼Œprops ä¼šä½œä¸ºè¯¥å‡½æ•°çš„å‚æ•°</p></div> <div class="custom-block tip"><p>ä¼ é€’ç»™ styled ç”Ÿæˆçš„ react ç»„ä»¶ä¸Šçš„å±æ€§ä¼šç©¿é€ç»™æœ€åç”Ÿæˆçš„æ ‡ç­¾</p></div> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">'styled-components'</span>

<span class="token keyword">const</span> HYInput <span class="token operator">=</span> styled<span class="token punctuation">.</span>input<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  color: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;
</span><span class="token template-punctuation string">`</span></span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HYInput</span></span> <span class="token attr-name">color</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>color<span class="token punctuation">}</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>ä¼ é€’ç»™ HYInput çš„ color å’Œ type å±æ€§æœ€åéƒ½ä¼šç©¿é€åˆ° input æ ‡ç­¾ä¸Š</p> <p><img src="data:image/png;base64,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" alt="style_components_example"></p> <h4 id="attrs-å±æ€§"><a href="#attrs-å±æ€§" class="header-anchor">#</a> attrs å±æ€§</h4> <p>styled-components å±æ€§é™¤äº†é€šè¿‡ props ä¼ é€’ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ·»åŠ  attrs å±æ€§èµ‹äºˆã€‚ä¼ é€’ç»™ attrs çš„å±æ€§ä¼šè¢«ç›´æ¥æ·»åŠ åˆ°æœ€åçš„æ ‡ç­¾ä¸Šã€‚</p> <div class="custom-block tip"><p>attrs ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚æ‰€ä»¥ä¹Ÿå¯ä»¥é€šè¿‡æ¨¡æ¿å­—ç¬¦ä¸²è°ƒç”¨</p></div> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">'styled-components'</span>

<span class="token keyword">const</span> HYInput <span class="token operator">=</span> styled<span class="token punctuation">.</span>input<span class="token punctuation">.</span><span class="token function">attrs</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'è¯·è¾“å…¥'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  color: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;
</span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">'16px'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> color<span class="token punctuation">,</span> fontSize <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HYInput</span></span> <span class="token attr-name">color</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>color<span class="token punctuation">}</span></span> <span class="token attr-name">fontSize</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fontSize<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h4 id="_3ã€ç»§æ‰¿"><a href="#_3ã€ç»§æ‰¿" class="header-anchor">#</a> 3ã€ç»§æ‰¿</h4> <p>å‡å¦‚æœ‰ä¸¤ä¸ªç»„ä»¶çš„æ ·å¼å¦‚ä¸‹ï¼š</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">const</span> HYButton <span class="token operator">=</span> styled<span class="token punctuation">.</span>button<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  padding: 10px 20px;
  border-color: red;
  color: #fff;
</span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">const</span> HYPrimaryButton <span class="token operator">=</span> styled<span class="token punctuation">.</span>button<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  padding: 10px 20px;
  border-color: red;
  color: green;
</span><span class="token template-punctuation string">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>è¿™ä¸¤ä¸ªç»„ä»¶çš„æ ·å¼éå¸¸ç›¸ä¼¼ï¼Œä»…ä»…åªæ˜¯å­—ä½“é¢œè‰²ä¸åŒï¼Œå¦‚æœæŒ‰ç…§ä¸Šé¢çš„å½¢å¼ä¹¦å†™ï¼Œæœªå…å¤ªå†—ä½™äº†ã€‚æ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ styled-components çš„å¦ä¸€ä¸ªç‰¹æ€§ï¼š ç»§æ‰¿ã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">'styled-components'</span>

<span class="token keyword">const</span> HYButton <span class="token operator">=</span> styled<span class="token punctuation">.</span>button<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  padding: 10px 20px;
  border-color: red;
  color: #fff;
</span><span class="token template-punctuation string">`</span></span>
<span class="token comment">//HYPrimaryButtonç»§æ‰¿HYButtonçš„æ ·å¼ï¼ŒåŒæ ·æ˜¯ç”ŸæˆbuttonæŒ‰é’®</span>
<span class="token keyword">const</span> HYPrimaryButton <span class="token operator">=</span> <span class="token function">styled</span><span class="token punctuation">(</span>HYButton<span class="token punctuation">)</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  color: green;
</span><span class="token template-punctuation string">`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="custom-block warning"><p>åªæœ‰æœ€åç”Ÿæˆçš„æ˜¯åŒç±»å‹çš„æ ‡ç­¾æ‰èƒ½ä½¿ç”¨ç»§æ‰¿</p></div> <h4 id="_4ã€ä¸»é¢˜"><a href="#_4ã€ä¸»é¢˜" class="header-anchor">#</a> 4ã€ä¸»é¢˜</h4> <p>ä¸€ä¸ªå·¥ç¨‹ä¸­å¯èƒ½å­˜åœ¨ä¸€éƒ¨åˆ†æ ·å¼æ˜¯å…¨å±€æ ·å¼ï¼Œå³ï¼Œå¤§éƒ¨åˆ†æ ‡ç­¾éƒ½ä¼šä½¿ç”¨åˆ°è¿™äº›æ ·å¼ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†è¿™éƒ¨åˆ†æ ·å¼å†™æˆä¸»é¢˜ï¼Œè¿™æ ·æ‰€æœ‰çš„æ ‡ç­¾éƒ½å¯ä»¥ä½¿ç”¨ä¸»é¢˜ä¸­çš„æ ·å¼ï¼Œè€Œä¸”æ—¥åç»´æŠ¤èµ·æ¥ä¹Ÿæ˜¯éå¸¸çš„æ–¹ä¾¿ã€‚</p> <p>ä½¿ç”¨ä¸»é¢˜éœ€è¦ä» styled-components ä¸­å¼•å…¥ ThemeProvider(ä¸€ä¸ª react ç»„ä»¶)ï¼Œå¹¶ä¸”ä¼ å…¥ä¸€ä¸ª theme å±æ€§(ä¸€ä¸ªå¯¹è±¡)ã€‚åŒæ ·å¯ä»¥é€šè¿‡ props åœ¨è°ƒç”¨<code>styled.æ ‡ç­¾å</code>å‡½æ•°æ—¶è·å–ã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> styled<span class="token punctuation">,</span> <span class="token punctuation">{</span> ThemeProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'styled-components'</span>

<span class="token keyword">const</span> DivStyle <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  color: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>theme<span class="token punctuation">.</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;
</span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ThemeProvider</span></span> <span class="token attr-name">theme</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token string">'20px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">DivStyle</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello react</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">DivStyle</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">ThemeProvider</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="æ·»åŠ -class"><a href="#æ·»åŠ -class" class="header-anchor">#</a> æ·»åŠ  class</h2> <p>ç”±äº class æ˜¯ JavaScript ä¸­çš„å…³é”®å­—ï¼Œæ‰€ä»¥ react ä¸­æ˜¯é€šè¿‡ç»™ className ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²æ¥æ·»åŠ ç±»åçš„ã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">isbbb</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> isbbb <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token keyword">const</span> classList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'aaa'</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isbbb<span class="token punctuation">)</span> classList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>'bbb<span class="token punctuation">)</span>
    <span class="token keyword">const</span> classname <span class="token operator">=</span> classList<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

        </span><span class="token punctuation">{</span><span class="token comment">/*å†™æ³•ä¸€*/</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>aaa<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello react</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

        </span><span class="token punctuation">{</span><span class="token comment">/*å†™æ³•äºŒ*/</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>isbbb <span class="token operator">?</span> <span class="token string">'bbb'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello world</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

        </span><span class="token punctuation">{</span><span class="token comment">/*å†™æ³•ä¸‰*/</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">aaa </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>isbbb <span class="token operator">?</span> <span class="token string">'bbb'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello heihei</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">

        </span><span class="token punctuation">{</span><span class="token comment">/*å†™æ³•å››*/</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>classname<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello haha</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>å¯¹äºç®€å•çš„ç±»åè€Œè¨€ï¼Œä¸Šé¢çš„å†™æ³•è¶³å¤Ÿäº†ï¼Œä½†æ˜¯å¦‚æœä¸€ä¸ªå…ƒç´ çš„æœ‰è®¸å¤šåŠ¨æ€ç±»ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªå…ƒç´ ä¸Šä¼šå†™è®¸å¤šçš„ä¸‰å…ƒè¿ç®—ï¼Œè¿™æ ·å¯¹äºåæœŸçš„ç»´æŠ¤è‚¯å®šæ˜¯ä¸å‹å¥½çš„ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼š<a href="https://github.com/JedWatson/classnames" target="_blank" rel="noopener noreferrer">classnames<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>å®‰è£…</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>yarn add classnames
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>å¼•å…¥</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> classNames <span class="token keyword">from</span> <span class="token string">'classnames'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block tip"><p>å¼•å…¥çš„ classNames æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶çš„å‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€å¯¹è±¡ã€æ•°ç»„ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯è¿™å‡ ç§æ•°æ®ç±»å‹çš„æ··åˆã€‚ç”¨çš„æœ€å¤šçš„è¿˜æ˜¯ä¼ ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</p></div> <p><strong>ä½¿ç”¨</strong></p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> classNames <span class="token keyword">from</span> <span class="token string">'classnames'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">isActive</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token function">classNames</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isActive <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          æˆ‘æ˜¯æ ‡é¢˜
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="è¡¥å……"><a href="#è¡¥å……" class="header-anchor">#</a> è¡¥å……</h2> <h3 id="purecomponent"><a href="#purecomponent" class="header-anchor">#</a> PureComponent</h3> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Childè¢«æ›´æ–°'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Child</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello world'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'appè¢«æ›´æ–°'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Child</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">changeMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello react'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>ä¸Šé¢çš„ä»£ç å¥½åƒæ²¡å•¥é—®é¢˜ï¼Œç„¶è€Œå½“æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œå‘ç°å³ä½¿æˆ‘ä»¬æ”¹å˜çš„ä»…ä»…æ˜¯ app ç»„ä»¶å½“ä¸­çš„çŠ¶æ€ï¼Œä½† Child ç»„ä»¶çš„ render å‡½æ•°ä¹Ÿä¼šé‡æ–°æ‰§è¡Œã€‚å³ï¼Œæ—¥å¿—ä¸­ä¼šåŒæ—¶æ‰“å°ï¼š<code>appè¢«æ›´æ–°</code>, <code>childè¢«æ›´æ–°</code>ã€‚</p> <p>åœ¨ react å½“ä¸­ï¼Œå¦‚æœæŸæ£µåµŒå¥—ç»„ç»‡æ ‘å¦‚ä¸‹ï¼Œå½“æˆ‘ä»¬æ”¹å˜ app ç»„ä»¶ä¸­çš„æŸä¸ªçŠ¶æ€æ—¶ï¼Œæ‰€æœ‰ç»„ä»¶çš„ render å‡½æ•°éƒ½ä¼šé‡æ–°æ‰§è¡Œä¸€éï¼Œæ€§èƒ½åŠ¿å¿…ä¹Ÿä¼šä¸‹é™ã€‚äº‹å®ä¸Šï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå¾ˆå¤šç»„ä»¶æ²¡å¿…è¦é‡æ–°æ‰§è¡Œå®ƒä»¬çš„ render å‡½æ•°ã€‚<strong>ä¸€ä¸ªç»„ä»¶çš„ render å‡½æ•°æ˜¯å¦è¦é‡æ–°æ‰§è¡Œåº”è¯¥æœ‰ä¸€ä¸ªå‰æï¼Œå°±æ˜¯ç»„ä»¶æ‰€ä¾èµ–çš„æ•°æ®(stateã€props)å‘ç”Ÿæ”¹å˜ã€‚</strong></p> <p><img src="data:image/png;base64,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" alt="component_tree"></p> <p>é‚£æˆ‘ä»¬å¦‚ä½•æ§åˆ¶ç»„ä»¶çš„ render å‡½æ•°ä¸å—å…¶ä»–ç»„ä»¶å½±å“å‘¢ï¼Ÿå…¶å®ï¼Œreact æ—©å°±æƒ³åˆ°äº†è¿™ä¸€ç‚¹ï¼Œæ‰€ä»¥åœ¨ react ä¸­å¯¼å‡ºäº†å¦ä¸€ä¸ªç±»ï¼š<strong>PureComponent</strong></p> <p>åœ¨ PureComponent ä¸­ï¼Œreact å·²ç»æ›¿æˆ‘ä»¬å®Œæˆäº† shouldComponentUpdate å‡½æ•°ä¸­çš„åˆ¤æ–­ï¼Œè€Œä¸” PureComponent ç»§æ‰¿ Component ç±»ï¼Œæ‹¥æœ‰ Component ç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ã€‚æ—¢ç„¶è¿™æ ·ï¼Œå‰é¢çš„ä»£ç å°±å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Childè¢«æ›´æ–°'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Child</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello world'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'appè¢«æ›´æ–°'</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Child</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">changeMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello react'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>ç»è¿‡ä¼˜åŒ–åçš„ä»£ç ï¼Œç‚¹å‡»æŒ‰é’®åï¼Œè™½ç„¶ app ç»„ä»¶çš„çŠ¶æ€å‘ç”Ÿäº†æ”¹å˜ï¼Œä½†æ˜¯ç”±äº Child ç»„ä»¶çš„çŠ¶æ€æ²¡æœ‰å‘ç”Ÿå˜åŒ–ä¸”ä¸ä¾èµ– App ç»„ä»¶ä¸­çš„ä»»ä½•çŠ¶æ€ï¼Œå³ Child çš„ state å’Œ props å‡æœªå‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤ä¸ä¼šé‡æ–°æ‰§è¡Œ render å‡½æ•°ã€‚</p> <div class="custom-block warning"><p>æ³¨æ„ï¼Œç»§æ‰¿äº† PureComponent çš„ç»„ä»¶æ˜¯ä¸å…è®¸å†è°ƒç”¨ shouldComponentUpdate å‡½æ•°çš„äº†ï¼Œå› ä¸º PureComponent ä¼šé‡å†™ç»„ä»¶çš„ shouldComponentUpdate æ–¹æ³•</p></div> <h3 id="memo"><a href="#memo" class="header-anchor">#</a> memo</h3> <p>ç±»ç»„ä»¶å¯ä»¥é€šè¿‡ç»§æ‰¿ PureComponent æ¥ä¼˜åŒ–æ˜¯å¦éœ€è¦æ›´æ–°ç»„ä»¶ï¼Œä½†æ˜¯å¦‚æœæ˜¯å‡½æ•°å¼ç»„ä»¶å‘¢ï¼Ÿè‚¯å®šä¸èƒ½é€šè¿‡ç»§æ‰¿ PureComponent æ¥å®ç°ï¼Œå› ä¸º PureComponent æœ¬è´¨ä¸Šæ˜¯ React å†…è°ƒç”¨äº† shouldComponentUpdate ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨ render å‡½æ•°ï¼Œè€Œå‡½æ•°å¼ç»„ä»¶ä¸­æ˜¯æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸã€‚</p> <p>äº‹å®ä¸Šï¼Œå‡½æ•°å¼ç»„ä»¶æ˜¯é€šè¿‡ memo æ¥ä¼˜åŒ–æ˜¯å¦éœ€è¦æ›´æ–°ç»„ä»¶çš„ã€‚memo æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œè¿™ä¸ªé«˜é˜¶ç»„ä»¶æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ª React ç»„ä»¶ã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent<span class="token punctuation">,</span> memo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> MemoMain <span class="token operator">=</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main ç»„ä»¶'</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">main ç»„ä»¶</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MemoMain</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>ä¸Šé¢ä»£ç çš„æ•ˆæœå’Œç±»ç»„ä»¶ç»§æ‰¿ PureComponent æ˜¯ä¸€æ ·çš„ï¼Œç‚¹å‡»æŒ‰é’®ï¼Œapp ç»„ä»¶çš„ render å‡½æ•°ä¼šæ‰§è¡Œï¼Œä½†æ˜¯ Main ç»„ä»¶ä¸­çš„å‡½æ•°ä¸ä¼šæ‰§è¡Œã€‚</p> <h3 id="ref"><a href="#ref" class="header-anchor">#</a> ref</h3> <p>åœ¨ react ä¸­ï¼Œå¯ä»¥é€šè¿‡ ref æ¥è·å–å¯¹åº”çš„ DOM èŠ‚ç‚¹ã€‚ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç§æ–¹å¼ï¼š</p> <p><strong>æ–¹å¼ä¸€ï¼šå­—ç¬¦ä¸²æ–¹å¼ã€‚</strong></p> <p>ç»™å…ƒç´ èµ‹å€¼ä¸€ä¸ªå­—ç¬¦ä¸²çš„ ref å±æ€§ï¼Œç„¶åé€šè¿‡<code>this.refs.å±æ€§å</code>çš„å¯ä»¥è·å–åˆ°å¯¹åº”çš„ DOM èŠ‚ç‚¹ã€‚è¿™ç§æ–¹å¼å®˜æ–¹å·²ç»ä¸æ¨èäº†ï¼Œå¹¶ä¸”åœ¨ä»¥åçš„ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šè¢«åˆ é™¤ã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>titleRef<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello world</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeVal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ”¹å˜</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">changeVal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>titleRef<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'hello react'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>æ–¹å¼äºŒã€å¯¹è±¡æ–¹å¼ã€‚</strong></p> <p>é€šè¿‡<code>React.createRef( )</code>çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå°†è¿™ä¸ªå¯¹è±¡èµ‹å€¼ç»™å…ƒç´ çš„ ref å±æ€§ã€‚ä½¿ç”¨æ—¶ï¼Œç›´æ¥é€šè¿‡è®¿é—®è¿™ä¸ªå¯¹è±¡çš„<code>currentå±æ€§</code>å°±å¯ä»¥è·å–åˆ°å¯¹åº”çš„ DOM èŠ‚ç‚¹ã€‚è¿™ç§æ–¹å¼æ˜¯ React å®˜æ–¹ç›®å‰æ¨èçš„æ–¹å¼ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent<span class="token punctuation">,</span> createRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>titleRef <span class="token operator">=</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2 ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>titleRef<span class="token punctuation">}</span><span class="token operator">&gt;</span>hello world<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeVal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>æ”¹å˜<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">changeVal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>titleRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'hello react'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>æ–¹å¼ä¸‰ã€å‡½æ•°æ–¹å¼ã€‚</strong></p> <p>æˆ‘ä»¬è¿˜å¯ä»¥å‘ DOM èŠ‚ç‚¹çš„ ref å±æ€§ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨ DOM èŠ‚ç‚¹è¢«æŒ‚è½½æ—¶è¿›è¡Œå›è°ƒã€‚è¿™ä¸ªå‡½æ•°ä¼šä¼ å…¥ä¸€ä¸ªå…ƒç´ å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±ä¿å­˜ï¼›ä½¿ç”¨æ—¶ï¼Œç›´æ¥æ‹¿åˆ°ä¹‹å‰ä¿å­˜çš„å…ƒç´ å¯¹è±¡å³å¯ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>titleRef <span class="token operator">=</span> <span class="token keyword">null</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2 ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>titleRef <span class="token operator">=</span> arg<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>hello world<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeVal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>æ”¹å˜<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">changeVal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>titleRef<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'hello react'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="custom-block tip"><p>æ³¨æ„ï¼šä¸èƒ½åœ¨å‡½æ•°å¼ç»„ä»¶ä¸Šä½¿ç”¨ ref å±æ€§ï¼Œå› ä¸ºå‡½æ•°å¼ç»„ä»¶æ²¡æœ‰ this å®ä¾‹</p></div> <p>æ—¢ç„¶æˆ‘ä»¬æ— æ³•åœ¨å‡½æ•°å¼ç»„ä»¶ä¸Šä½¿ç”¨ ref å±æ€§ï¼Œé‚£å¦‚æœæˆ‘ä»¬æƒ³è¦è·å–å¯¹åº”çš„ç»„ä»¶å¯¹è±¡å‘¢ï¼Ÿæ­¤æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨é«˜é˜¶ç»„ä»¶æ¥è½¬å‘ refï¼Œè¿™ä¸ªé«˜é˜¶ç»„ä»¶å°±æ˜¯<code>React.forwardRef</code></p> <p>è¿™é‡Œæåˆ°ä¸€ä¸ªæ–°æ¦‚å¿µ ---- é«˜é˜¶ç»„ä»¶ã€‚ä»€ä¹ˆæ˜¯é«˜é˜¶ç»„ä»¶å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å…ˆçœ‹çœ‹é«˜é˜¶å‡½æ•°çš„å®šä¹‰ã€‚æ¥æ”¶ä¸€ä¸ªæˆ–å¤šä¸ªå‡½æ•°ä½œä¸ºå‚æ•°å¹¶è¿”å›ä¸€ä¸ªå‡½æ•°çš„çš„å‡½æ•°ç§°ä¸ºé«˜é˜¶å‡½æ•°ã€‚åŒç†ã€‚é«˜é˜¶ç»„ä»¶çš„å‚æ•°æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œè¿”å›å€¼åŒæ ·ä¹Ÿæ˜¯ä¸€ä¸ªæ–°ç»„ä»¶çš„å‡½æ•°ï¼Œé«˜é˜¶ç»„ä»¶çš„è‹±æ–‡æ˜¯ï¼šHigher-Order Componentsï¼Œç®€ç§° HOCã€‚</p> <p>æˆ‘ä»¬å¯ä»¥è¿›è¡Œå¦‚ä¸‹è§£æï¼š</p> <ul><li>é¦–å…ˆï¼Œé«˜é˜¶ç»„ä»¶æœ¬èº«å¹¶ä¸æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œè€Œçº¯ç²¹æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</li> <li>å…¶æ¬¡ï¼Œè¿™ä¸ªå‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œè¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªç»„ä»¶ã€‚</li></ul> <p>ref è½¬å‘å°±æ˜¯é€šè¿‡ç±»ç»„ä»¶åˆ›å»ºä¸€ä¸ª ref å¯¹è±¡ï¼Œç„¶åä¼ é€’ç»™å­ç»„ä»¶(å‡½æ•°å¼ç»„ä»¶)ã€‚è¿™æ ·ï¼Œå‡½æ•°å¼ç»„ä»¶ä¸­å°±å¯ä»¥ä½¿ç”¨ ref äº†ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent<span class="token punctuation">,</span> createRef<span class="token punctuation">,</span> forwardRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> Child <span class="token operator">=</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> ref</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h2 ref<span class="token operator">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span><span class="token operator">&gt;</span>hello react<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>titleRef <span class="token operator">=</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Child ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>titleRef<span class="token punctuation">}</span> name<span class="token operator">=</span><span class="token string">&quot;tom&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="fragment"><a href="#fragment" class="header-anchor">#</a> Fragment</h3> <p>jsx è¯­æ³•è¦æ±‚å¿…é¡»ä¸”åªèƒ½è¿”å›ä¸€ä¸ªæ ¹å…ƒç´ ï¼Œä¾‹å¦‚ä¸‹é¢çš„ jsx è¯­æ³•ä¸­è¿”å›äº†ä¸€ä¸ª div æ ¹å…ƒç´ ã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello world</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>message <span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ä½†å…¶å®è¿™ä¸ª div å¹¶æ²¡æœ‰ä»»ä½•å®è´¨æ€§çš„ä½œç”¨ï¼Œå› æ­¤ react å¼•å…¥äº† Fragment çš„æ¦‚å¿µæ¥å……å½“æ ¹å…ƒç´ ã€‚Fragment çš„ä½œç”¨ç±»ä¼¼äº vue ä¸­çš„ templateï¼Œå½“ react é‡åˆ° Fragment æ—¶ï¼Œä¸ä¼šæ¸²æŸ“å‡ºä»»ä½•é¢å¤–çš„ DOM èŠ‚ç‚¹ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</p> <h3 id="protals"><a href="#protals" class="header-anchor">#</a> Protals</h3> <p>æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›æ¸²æŸ“çš„å†…å®¹ç‹¬ç«‹äºçˆ¶ç»„ä»¶ï¼Œç”šè‡³ç‹¬ç«‹äºå½“å‰æŒ‚è½½çš„ DOM å…ƒç´ ä¸­(é»˜è®¤éƒ½æ˜¯æŒ‚è½½åˆ° id ä¸º root çš„ DOM å…ƒç´ ä¸Š)ã€‚æ¯”å¦‚ dialog å¼¹æ¡†ï¼Œé€šå¸¸æˆ‘ä»¬å¸Œæœ›å®ƒè„±ç¦»å…¶çˆ¶ç»„ä»¶è€Œæ€»æ˜¯ä½äºå¯è§†çª—å£çš„ä¸­é—´ã€‚è€Œ Protals å°±æä¾›äº†è¿™æ ·çš„ä¸€ç§å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°è„±ç¦»çˆ¶ç»„ä»¶ä¹‹å¤–çš„ DOM èŠ‚ç‚¹çš„ä¼˜ç§€æ–¹æ¡ˆã€‚</p> <p>Protals çš„æœ¬è´¨ä»ç„¶æ˜¯ä¸€ä¸ª React ç»„ä»¶ï¼Œåªä¸è¿‡è¿™ä¸ªç»„ä»¶ä¸æ˜¯ä»¥æˆ‘ä»¬ä¹‹å‰ä»‹ç»çš„ç±»ç»„ä»¶æˆ–å‡½æ•°å¼ç»„ä»¶çš„åˆ›å»ºæ–¹å¼åˆ›å»ºçš„ï¼Œè€Œæ˜¯é€šè¿‡è°ƒç”¨<code>ReactDom.createPortal</code>å‡½æ•°ç”Ÿæˆçš„ã€‚
è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p> <ul><li><p>1ã€è¦æ¸²æŸ“åœ¨ Protals ä¸­çš„ React å­å…ƒç´ ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå…ƒç´ ã€å­—ç¬¦ä¸²æˆ–è€… fragmentï¼›</p></li> <li><p>2ã€Protals æŒ‚è½½çš„ DOM å…ƒç´ </p></li></ul> <p><strong>ä½¿ç”¨æ­¥éª¤ï¼š</strong></p> <p>1ã€ä¿®æ”¹ public/index.html æ–‡ä»¶ï¼Œæ·»åŠ  protals æŒ‚è½½çš„èŠ‚ç‚¹
<img src="/assets/img/protals_parent_dom.f75bb06d.png" alt="protals_parent_dom"></p> <p>2ã€ç¼–å†™èŠ‚ç‚¹æ ·å¼
<img src="/assets/img/protals_css.86fb2667.png" alt="protals_css"></p> <p>3ã€ç¼–å†™ç»„ä»¶ä»£ç </p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> ReactDom <span class="token keyword">from</span> <span class="token string">'react-dom'</span>

<span class="token keyword">class</span> <span class="token class-name">Modal</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ReactDom<span class="token punctuation">.</span><span class="token function">createPortal</span><span class="token punctuation">(</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">,</span>
      document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'modal'</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">app</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Modal</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hello world</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Modal</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="react-transition-group"><a href="#react-transition-group" class="header-anchor">#</a> react-transition-group</h3> <p>åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦ç»™ä¸€ä¸ªç»„ä»¶çš„æ˜¾ç¤ºå’Œæ¶ˆå¤±æ·»åŠ æŸç§è¿‡æ¸¡åŠ¨ç”»ï¼Œä»¥å¢åŠ ç”¨æˆ·ä½“éªŒã€‚å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åŸç”Ÿçš„ css æ¥å®ç°è¿™äº›åŠ¨ç”»ï¼Œä½†æ˜¯ React ç¤¾åŒºåŒæ ·ä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†<a href="https://reactcommunity.org/react-transition-group/" target="_blank" rel="noopener noreferrer">react-transition-group<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼Œç”¨æ¥å®Œæˆè¿‡æ¸¡åŠ¨ç”»ã€‚è¿™ä¸ªåº“å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ–¹ä¾¿çš„å®ç°ç»„ä»¶çš„å…¥åœºå’Œç¦»åœºåŠ¨ç”»ã€‚</p> <div class="custom-block tip"><p>react-transition-group ä¸»è¦ç”±ä»¥ä¸‹å››ä¸ªç»„ä»¶ç»„æˆï¼š</p> <p>1ã€Transitionï¼šè¯¥ç»„ä»¶æ˜¯ä¸€ä¸ªå’Œå¹³å°æ— å…³çš„ç»„ä»¶ï¼Œåœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬æ˜¯ç»“åˆ CSS æ¥å®Œæˆè¿‡æ¸¡åŠ¨ç”»ï¼Œæ‰€ä»¥ç¬”è®°å¸¸ç”¨çš„æ˜¯ CSSTransitionã€‚</p> <p>2ã€CSSTransitionï¼šå®Œæˆè¿‡æ¸¡åŠ¨ç”»æ•ˆæœã€‚</p> <p>3ã€SwitchTransitionï¼šå®Œæˆä¸¤ä¸ªç»„ä»¶æ˜¾ç¤ºå’Œéšè—åˆ‡æ¢åŠ¨ç”»ã€‚</p> <p>4ã€TransitionGroupï¼šå°†å¤šä¸ªåŠ¨ç”»åŒ…è£¹å…¶ä¸­ï¼Œä¸€èˆ¬ç”¨äºåˆ—è¡¨ä¸­å…ƒç´ çš„åŠ¨ç”»ã€‚</p></div> <h4 id="csstransition"><a href="#csstransition" class="header-anchor">#</a> CSSTransition</h4> <p>CSSTransition æ˜¯åŸºäº Transition ç»„ä»¶æ„å»ºçš„ï¼Œ<strong>å®ƒåªå…è®¸åŒ…è£¹ä¸€ä¸ªæ ¹å…ƒç´ ã€‚</strong></p> <p>CSSTransition æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸‰ä¸ªçŠ¶æ€ï¼šappearã€enterã€exitã€‚</p> <p>å®ƒä»¬æœ‰ä¸‰ç§çŠ¶æ€ï¼Œéœ€è¦å®šä¹‰å¯¹åº”çš„ css æ ·å¼ï¼š</p> <p>å¼€å§‹çŠ¶æ€ï¼šå¯¹åº”çš„ç±»æ˜¯ <code>-appear</code>ã€<code>-enter</code>ã€<code>-exit</code>ï¼›</p> <p>æ‰§è¡ŒåŠ¨ç”»ï¼šå¯¹åº”çš„ç±»æ˜¯ <code>-appear-active</code>ã€<code>-enter-active</code>ã€<code>-exit-active</code>ï¼›</p> <p>æ‰§è¡Œç»“æŸï¼šå¯¹åº”çš„ç±»æ˜¯ <code>-appear-done</code>ã€<code>-enter-done</code>ã€<code>-exit-done</code>ï¼›</p> <p><strong>CSSTransition å¸¸è§å¯¹åº”çš„å±æ€§ï¼š</strong></p> <p>inï¼šè§¦å‘è¿›å…¥æˆ–è€…é€€å‡ºçŠ¶æ€ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ã€‚</p> <div class="custom-block tip"><p>å½“ in ä¸º true æ—¶ï¼Œè§¦å‘è¿›å…¥çŠ¶æ€ï¼Œæ·»åŠ <code>-enter</code>ã€<code>-enter-active</code>çš„ç±»åï¼Œå¹¶å¼€å§‹æ‰§è¡ŒåŠ¨ç”»ï¼Œå½“åŠ¨ç”»ç»“æŸåï¼Œä¼šç§»é™¤è¿™ä¸¤ä¸ªç±»åå¹¶æ·»åŠ <code>-enter-done</code>çš„ç±»åã€‚</p> <p>å½“ in ä¸º false æ—¶ï¼Œè§¦å‘é€€å‡ºçŠ¶æ€ï¼Œæ·»åŠ <code>-exit</code>ã€<code>-exit-active</code>çš„ç±»åï¼Œå¹¶å¼€å§‹æ‰§è¡ŒåŠ¨ç”»ï¼Œå½“åŠ¨ç”»ç»“æŸåï¼Œä¼šç§»é™¤è¿™ä¸¤ä¸ªç±»åå¹¶æ·»åŠ <code>-exit-done</code>çš„ç±»åã€‚</p></div> <p>classNamesï¼šåŠ¨ç”» class çš„åç§°ï¼Œå†³å®šäº†åœ¨ç¼–å†™ css æ—¶ï¼Œå¯¹åº”çš„ class åç§°ï¼Œæ¯”å¦‚ card-enterã€card-enter-activeã€card-enter-doneã€‚</p> <p>timeoutï¼šclassNames æ·»åŠ çš„æ—¶é—´ï¼Œè¯¥å±æ€§å¹¶ä¸ä¼šæ§åˆ¶åŠ¨ç”»æ‰§è¡Œçš„æ—¶é—´ï¼ŒåŠ¨ç”»æ‰§è¡Œçš„æ—¶é—´æ˜¯ç”± css ä¸­çš„å±æ€§æ§åˆ¶çš„ã€‚</p> <p>appearï¼šæ˜¯å¦åœ¨åˆæ¬¡è¿›å…¥æ·»åŠ åŠ¨ç”»(éœ€è¦å’Œ in åŒæ—¶ä¸º true)ã€‚</p> <p>unmountOnExitï¼šé€€å‡ºåå¸è½½ç»„ä»¶ã€‚å½“<code>unmountOnExit={ false }</code>æ—¶ï¼Œç»„ä»¶çš„è¿‡æ¸¡ä»…ä»…æ˜¯æ“ä½œ cssï¼Œå³ä»…ä»…æ˜¯éšè—ç»„ä»¶ï¼Œè¯¥ç»„ä»¶å¹¶æ²¡æœ‰ä» DOM æ ‘ä¸Šå»é™¤ä¸”ä¾æ—§å æ®åŸæ¥çš„ä½ç½®ï¼›å½“<code>unmountOnExit={ true }</code>æ—¶ï¼Œç»„ä»¶é€€å‡ºåä¼šä» DOM æ ‘ä¸Šå»é™¤ã€‚é»˜è®¤æ˜¯ falseã€‚</p> <p><strong>CSSTransition å¸¸è§çš„é’©å­å‡½æ•°ï¼š</strong>
onEnterï¼šåœ¨è¿›å…¥åŠ¨ç”»ä¹‹å‰è¢«è§¦å‘</p> <p>onEnteringï¼šåœ¨åº”ç”¨è¿›å…¥åŠ¨ç”»æ—¶è¢«è§¦å‘</p> <p>onEnteredï¼šåœ¨åº”ç”¨è¿›å…¥åŠ¨ç”»ç»“æŸåè¢«è§¦å‘</p> <p>onExitï¼šåœ¨é€€å‡ºåŠ¨ç”»ä¹‹å‰è¢«è§¦å‘</p> <p>onExitingï¼šåœ¨åº”ç”¨é€€å‡ºåŠ¨ç”»æ—¶è¢«è§¦å‘</p> <p>onExitedï¼šåœ¨åº”ç”¨é€€å‡ºåŠ¨ç”»ç»“æŸåè¢«è§¦å‘</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">//app.js</span>

<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CSSTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-transition-group'</span>
<span class="token keyword">import</span> <span class="token string">'./app.css'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">isShow</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> isShow <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">æ˜¾ç¤º/éšè—</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CSSTransition</span></span>
          <span class="token attr-name">in</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>isShow<span class="token punctuation">}</span></span>
          <span class="token attr-name">classNames</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>card<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">timeout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">300</span><span class="token punctuation">}</span></span>
          <span class="token attr-name">onEnter</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å¼€å§‹è¿›å…¥'</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">CSSTransition</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">changState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">isShow</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isShow<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* app.css */</span>

<span class="token selector">.box</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.card-enter</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.4<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.card-enter-active</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 300ms<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.card-exit</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.card-exit-active</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.4<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 300ms<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.card-exit-done</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="switchtransition"><a href="#switchtransition" class="header-anchor">#</a> SwitchTransition</h3> <p>SwitchTransition å¯ä»¥å®Œæˆä¸¤ä¸ªç»„ä»¶ä¹‹é—´åˆ‡æ¢çš„ç‚«é…·åŠ¨ç”»ã€‚æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œéœ€è¦åœ¨ on å’Œ off ä¹‹é—´åˆ‡æ¢ï¼Œå¹¶ä¸”å¸Œæœ›çœ‹åˆ° on å…ˆä»å·¦è¾¹é€€å‡ºï¼Œoff å†ä»å³è¾¹è¿›å…¥ã€‚è¿™ä¸ªåŠ¨ç”»åœ¨ vue ä¸­è¢«ç§°ä¸º vue transition modesï¼Œè€Œ react-transition-group ä¸­ä½¿ç”¨ SwitchTransition æ¥å®ç°è¯¥åŠ¨ç”»ã€‚</p> <p>SwitchTransition ä¸­ä¸»è¦æœ‰ä¸€ä¸ªå±æ€§ï¼šmodeï¼Œè¿™ä¸ªå±æ€§æœ‰ä¸¤ä¸ªå€¼ï¼š</p> <ul><li>in-outï¼šè¡¨ç¤ºæ–°ç»„ä»¶å…ˆè¿›å…¥ï¼Œæ—§ç»„ä»¶å†ç§»é™¤</li> <li>out-inï¼šè¡¨ç¤ºæ—§ç»„ä»¶å…ˆç§»é™¤ï¼Œæ–°ç»„ä»¶å†è¿›å…¥</li></ul> <div class="custom-block tip"><p>SwitchTransition ç»„ä»¶é‡Œé¢è¦æœ‰ CSSTransition æˆ–è€… Transition ç»„ä»¶ï¼Œä¸èƒ½ç›´æ¥åŒ…è£¹è¦åˆ‡æ¢çš„ç»„ä»¶</p> <p>SwitchTransition é‡Œé¢çš„ CSSTransition æˆ– Transition ç»„ä»¶ä¸å†åƒä»¥å‰é‚£æ ·æ¥æ”¶ in å±æ€§æ¥åˆ¤æ–­å…ƒç´ æ˜¯ä½•ç§çŠ¶æ€ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ key å±æ€§</p> <p>SwitchTransition ä¸ CSSTransition çš„åŒºåˆ«åœ¨äºï¼šCSSTransition åªèƒ½æ§åˆ¶å…ƒç´ çš„æ˜¾ç¤ºå’Œéšè—æˆ–è€…å…¶ä»–çš„ css å±æ€§ï¼›è€Œ SwitchTransition ä¸ä»…æ§åˆ¶ css å±æ€§è¿˜èƒ½æ”¹å˜æ˜¾ç¤ºçš„æ–‡æœ¬</p></div> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token comment">// app.js</span>

<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CSSTransition<span class="token punctuation">,</span> SwitchTransition <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-transition-group'</span>
<span class="token keyword">import</span> <span class="token string">'./app.css'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">isOn</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> isOn <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SwitchTransition</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>out-in<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CSSTransition</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>isOn<span class="token punctuation">}</span></span> <span class="token attr-name">timeout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">1000</span><span class="token punctuation">}</span></span> <span class="token attr-name">classNames</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>card<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
              </span><span class="token punctuation">{</span>isOn <span class="token operator">?</span> <span class="token string">'on'</span> <span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">}</span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">CSSTransition</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">SwitchTransition</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">changState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">isOn</span><span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isOn<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* app.css */</span>

<span class="token selector">.card-enter</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.card-enter-active</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 1000ms<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.card-exit</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.card-exit-active</span> <span class="token punctuation">{</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 1000ms<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="transitiongroup"><a href="#transitiongroup" class="header-anchor">#</a> TransitionGroup</h3> <p>å½“æˆ‘ä»¬æœ‰ä¸€ç»„ CSSTransition æ—¶ï¼Œéœ€è¦å°†è¿™äº› CSSTransition ç»Ÿä¸€æ”¾å…¥åˆ°ä¸€ä¸ª TransitionGroup ä¸­æ¥å®ŒæˆåŠ¨ç”»ã€‚</p> <div class="language-jsx line-numbers-mode"><pre class="language-jsx"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">TransitionGroup</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CSSTransition</span></span> <span class="token attr-name">classNames</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>friend<span class="token punctuation">&quot;</span></span> <span class="token attr-name">timeout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">300</span><span class="token punctuation">}</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">CSSTransition</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">TransitionGroup</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°: </span> <span class="time">1/1/2023, 4:10:51 PM</span></div></footer> <!----> <!----></main> <!----> <div class="comments-wrapper" data-v-4698c43e><!----></div></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-44bd5a18 data-v-44bd5a18><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-44bd5a18><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-44bd5a18></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-44bd5a18></path></svg></div><!----><div></div><!----><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="https://music.163.com/song/media/outer/url?id=316756.mp3" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:200px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="https://p2.music.126.net/qOOTIykbSLw9RHB0vI83GA==/737772302281958.jpg" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(https://p2.music.126.net/qOOTIykbSLw9RHB0vI83GA==/737772302281958.jpg);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          æ’­æ”¾å¤±è´¥
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>å¤§åŸå°äº‹</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>æ¨åƒå¬…</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div></div></div>
    <script src="/assets/js/app.b627ab70.js" defer></script><script src="/assets/js/4.b7ac1ab4.js" defer></script><script src="/assets/js/1.9d26e7c2.js" defer></script><script src="/assets/js/10.a2a3a23e.js" defer></script><script src="/assets/js/16.d6e6d53e.js" defer></script>
  </body>
</html>
